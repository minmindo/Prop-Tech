(this.webpackJsonpproptech=this.webpackJsonpproptech||[]).push([[0],{122:function(e,t){},124:function(e){e.exports=JSON.parse('{"cognito":{"userPoolId":"us-east-2_huvDfNvwg","clientId":"5pnk6nl00en7u14kb3duursgvr"},"aws_region":"us-east-2","server_ip":"18.191.88.211"}')},17:function(e,t,a){},208:function(e,t,a){},237:function(e,t,a){},644:function(e,t,a){"use strict";a.r(t);var r=a(1),s=a.n(r),n=a(23),i=a.n(n),o=(a(208),a(17),a(8)),c=a(9),l=a(11),d=a(10),h=a(129),b=a(680),u=a(181),j=a(681),p=a(679),m=a(0),_=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).login=function(){window.location="/LoginPage"},e.signup=function(){window.location="/SignUpPage"},e}return Object(c.a)(a,[{key:"render",value:function(){return Object(m.jsx)("div",{className:"App",children:Object(m.jsx)("header",{className:"App-header",children:Object(m.jsxs)(u.a,{elevation:24,children:[Object(m.jsx)(h.a,{component:"h1",variant:"h1",color:"primary",children:"PropTech"}),Object(m.jsx)(p.a,{}),Object(m.jsx)(b.a,{}),Object(m.jsx)(b.a,{}),Object(m.jsx)(b.a,{}),Object(m.jsx)(p.a,{}),Object(m.jsx)(p.a,{}),Object(m.jsx)("div",{className:"buttons",children:Object(m.jsx)("table",{children:Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:Object(m.jsx)(u.a,{children:Object(m.jsx)(j.a,{color:"primary",style:{fontSize:15},className:"button",onClick:this.login,children:"Login"})})}),Object(m.jsx)("th",{children:Object(m.jsx)(u.a,{children:Object(m.jsx)(j.a,{color:"primary",style:{fontSize:15},className:"button",onClick:this.signup,children:"Sign Up"})})})]})})})})]})})})}}]),a}(s.a.Component);function O(){window.location="/"}var g=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(m.jsx)("div",{children:Object(m.jsx)("div",{className:"RegProcess",children:Object(m.jsxs)("header",{className:"RegProcess-header",children:[Object(m.jsx)(h.a,{component:"h1",variant:"h5",color:"primary",children:"Thank you, you will recieve an email about your registration result shortly."}),Object(m.jsx)(j.a,{color:"primary",onClick:O,children:"Ok"})]})})})}}]),a}(s.a.Component),x=a(172),f=a(124),v={UserPoolId:f.cognito.userPoolId,ClientId:f.cognito.clientId},y=new x.CognitoUserPool(v),C=f.aws_region,k=a(686),S=a(703),w=a(707),P=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).changeVerificationCode=function(e){r.setState({verificationCode:e.target.value})},r.changeUsername=function(e){r.setState({username:e.target.value})},r.changeNewPassword1=function(e){r.setState({newPassword1:e.target.value})},r.changeNewPassword2=function(e){r.setState({newPassword2:e.target.value})},r.confirmPassword=function(){var e=new x.CognitoUser({Username:r.state.username,Pool:y});r.state.newPassword1==r.state.newPassword2?(e.confirmPassword(r.state.verificationCode,r.state.newPassword1,{onSuccess:function(e){},onFailure:function(e){}}),r.setState({dialog_open:!0,dialog_text:"Success"})):r.setState({dialog_open:!0,dialog_text:"Passwords do not match"})},r.handleDialogClose=function(){r.setState({dialog_open:!1}),window.location="/"},r.state={username:"",verificationCode:"",newPassword1:"",newPassword2:"",dialog_open:!1,dialog_text:""},r}return Object(c.a)(a,[{key:"render",value:function(){return Object(m.jsx)("div",{className:"ResetPassword",children:Object(m.jsxs)("header",{className:"Login-header",children:[Object(m.jsx)(h.a,{component:"h1",variant:"h4",color:"primary",children:"New Password"}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"verification_code",label:"Enter your verification code",value:this.state.verificationCode,onChange:this.changeVerificationCode}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"username",label:"Enter your username",value:this.state.username,onChange:this.changeUsername}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"password1",type:"password",label:"Enter your new password",value:this.state.newPassword1,onChange:this.changeNewPassword1}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"password2",type:"password",label:"Re-enter your new password",value:this.state.newPassword2,onChange:this.changeNewPassword2}),Object(m.jsx)(j.a,{color:"primary",onClick:this.confirmPassword,children:"Confirm"}),Object(m.jsx)(w.a,{open:this.state.dialog_open,onClose:this.handleDialogClose,"aria-labelledby":"form-dialog-title",children:Object(m.jsxs)(p.a,{children:[Object(m.jsx)(k.a,{}),this.state.dialog_text,Object(m.jsx)(j.a,{onClick:this.handleDialogClose,color:"primary",children:"OK"})]})})]})})}}]),a}(s.a.Component),T=a(3),M=a(13),D=a.n(M);var E=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).reset=function(){window.location="/ResetPassword"},e.state={email:"",password:"",errorMessage:"",errors:""},e.changeEmail=e.changeEmail.bind(Object(T.a)(e)),e.changePassword=e.changePassword.bind(Object(T.a)(e)),e.onSubmit=e.onSubmit.bind(Object(T.a)(e)),e}return Object(c.a)(a,[{key:"changeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"changePassword",value:function(e){this.setState({password:e.target.value})}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var a={Username:this.state.email,Password:this.state.password},r=new x.AuthenticationDetails(a),s={Username:this.state.email,Pool:y};new x.CognitoUser(s).authenticateUser(r,{onSuccess:function(e){console.log(e),D.a.post("/auth",{accessToken:e.accessToken.jwtToken,idToken:e.idToken.jwtToken}).then((function(t){console.log(t.data);var a=t.data.accessData["cognito:groups"][0];"PropertyManager"==a?(sessionStorage.setItem("username",t.data.idData.email),sessionStorage.setItem("sub",t.data.accessData.sub),sessionStorage.setItem("accessToken",JSON.stringify(e.accessToken)),sessionStorage.setItem("custom:company_name",e.idToken.payload["custom:company_name"]),sessionStorage.setItem("custom:street_name",e.idToken.payload["custom:street_name"]),sessionStorage.setItem("custom:suite_number",e.idToken.payload["custom:suite_number"]),sessionStorage.setItem("custom:city",e.idToken.payload["custom:city"]),sessionStorage.setItem("custom:state",e.idToken.payload["custom:state"]),sessionStorage.setItem("custom:zipcode",e.idToken.payload["custom:zipcode"]),window.location="/PropMana/".concat(sessionStorage.getItem("sub"),"/property")):"Admin"==a&&(sessionStorage.setItem("admin_username",t.data.idData.email),sessionStorage.setItem("admin_sub",t.data.accessData.sub),window.location="/Admin/propertyManagers")})),t.setState({errors:!1})},onFailure:function(e){console.log(e),t.setState({errorMessage:e.message,errors:!0})}})}},{key:"render",value:function(){var e=this.state.errors,t=this.state.errorMessage;return Object(m.jsx)("div",{children:Object(m.jsx)("div",{className:"LoginPage",children:Object(m.jsx)("form",{onSubmit:this.onSubmit,children:Object(m.jsxs)("header",{className:"Login-header",children:[Object(m.jsx)(h.a,{component:"h1",variant:"h1",color:"primary",children:"PropTech"}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"email",label:"Enter your email",type:"text",onChange:this.changeEmail,value:this.state.email,error:this.state.errors,required:!0}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"password",label:"Password",type:"password",onChange:this.changePassword,value:this.state.password,helperText:e?t:null,error:this.state.errors,required:!0}),Object(m.jsx)(j.a,{color:"primary",type:"submit",value:"submit",children:"Login"}),Object(m.jsx)(j.a,{color:"primary",onClick:this.reset,children:"Reset Password"})]})})})})}}]),a}(s.a.Component),I=a(682);var F=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={company_name:"",email:"",password:"",confirm_password:"",street_name:"",suite_number:"",city:"",state:"",zipcode:"",passwordError:""},e.changeCompanyName=e.changeCompanyName.bind(Object(T.a)(e)),e.changeEmail=e.changeEmail.bind(Object(T.a)(e)),e.changePassword=e.changePassword.bind(Object(T.a)(e)),e.changeConfirmPassword=e.changeConfirmPassword.bind(Object(T.a)(e)),e.changeStreetName=e.changeStreetName.bind(Object(T.a)(e)),e.changeSuiteNumber=e.changeSuiteNumber.bind(Object(T.a)(e)),e.changeCity=e.changeCity.bind(Object(T.a)(e)),e.changeState=e.changeState.bind(Object(T.a)(e)),e.changeZipcode=e.changeZipcode.bind(Object(T.a)(e)),e.onSubmit=e.onSubmit.bind(Object(T.a)(e)),e}return Object(c.a)(a,[{key:"changeCompanyName",value:function(e){this.setState({company_name:e.target.value})}},{key:"changeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"changePassword",value:function(e){this.setState({password:e.target.value})}},{key:"changeConfirmPassword",value:function(e){this.setState({confirm_password:e.target.value})}},{key:"changeStreetName",value:function(e){this.setState({street_name:e.target.value})}},{key:"changeSuiteNumber",value:function(e){this.setState({suite_number:e.target.value})}},{key:"changeCity",value:function(e){this.setState({city:e.target.value})}},{key:"changeState",value:function(e){this.setState({state:e.target.value})}},{key:"changeZipcode",value:function(e){this.setState({zipcode:e.target.value})}},{key:"validate",value:function(){var e="";return this.state.password==this.state.confirm_password||(e="Password must be the same",this.setState({passwordError:e}),!1)}},{key:"onSubmit",value:function(e){if(e.preventDefault(),this.validate()){var t={company_name:this.state.company_name,email:this.state.email,password:this.state.password,street_name:this.state.street_name,suite_number:this.state.suite_number,city:this.state.city,state:this.state.state,zipcode:this.state.zipcode};D.a.post("/signup",t).then((function(e){console.log(e.data),window.location="/RegProcess"}))}}},{key:"render",value:function(){var e=this.state.password!==this.state.confirm_password;return Object(m.jsx)("div",{children:Object(m.jsx)("div",{className:"SignUpPage",id:"signup",children:Object(m.jsx)("header",{className:"SignUp-header",children:Object(m.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(m.jsx)(h.a,{component:"h1",variant:"h4",color:"primary",children:"Please enter the information below"}),Object(m.jsx)("div",{id:"registration",children:Object(m.jsxs)(I.a,{column:!0,children:[Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"company_name",label:"Company Name",type:"text",onChange:this.changeCompanyName,value:this.state.company_name,required:!0}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"email",label:"Email",type:"text",onChange:this.changeEmail,value:this.state.email,required:!0}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"passowrd",label:"Password",type:"password",onChange:this.changePassword,value:this.state.password,required:!0}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"confirm_passowrd",label:"Confirm Password",type:"password",onChange:this.changeConfirmPassword,value:this.state.confirm_password,helperText:this.validate?this.state.passwordError:"Matched",error:e,required:!0}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"street_name",label:"Company Street Name",type:"text",onChange:this.changeStreetName,value:this.state.street_name,required:!0}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"suite_number",label:"Suite Number",type:"text",onChange:this.changeSuiteNumber,value:this.state.suite_number}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"city",label:"City",type:"text",onChange:this.changeCity,value:this.state.city,required:!0}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"state",label:"State",type:"text",onChange:this.changeState,value:this.state.state,required:!0}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"zipcode",label:"Zipcode",type:"text",onChange:this.changeZipcode,value:this.state.zipcode,required:!0}),Object(m.jsx)(p.a,{}),Object(m.jsx)(j.a,{color:"primary",type:"submit",value:"submit",children:"Register"})]})})]})})})})}}]),a}(s.a.Component),N=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).changeUsername=function(e){r.setState({username:e.target.value})},r.handleDialogClose=function(){window.location="/ResetProcess"},r.resetPassword=function(){var e=new x.CognitoUser({Username:r.state.username,Pool:y});console.log(r.state.username),e.forgotPassword({onSuccess:function(e){},onFailure:function(e){}}),r.setState({dialog_open:!0})},r.state={username:"",dialog_open:!1,dialog_text:"An email has been sent with a verification code"},r}return Object(c.a)(a,[{key:"render",value:function(){return Object(m.jsx)("div",{className:"ResetPassword",children:Object(m.jsxs)("header",{className:"Login-header",children:[Object(m.jsx)(h.a,{component:"h1",variant:"h4",color:"primary",children:"Reset Password"}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"username",label:"Enter your username",onChange:this.changeUsername,value:this.state.username}),Object(m.jsx)(j.a,{color:"primary",onClick:this.resetPassword,children:"Reset"}),Object(m.jsx)(w.a,{open:this.state.dialog_open,onClose:this.handleDialogClose,"aria-labelledby":"form-dialog-title",children:Object(m.jsxs)(p.a,{children:[Object(m.jsx)(k.a,{}),this.state.dialog_text,Object(m.jsx)(j.a,{onClick:this.handleDialogClose,color:"primary",children:"OK"})]})})]})})}}]),a}(s.a.Component),L=(a(237),a(687)),A=a(688),B=a(689),U=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).home=function(){window.location="/"},e.about=function(){window.location="/About"},e}return Object(c.a)(a,[{key:"render",value:function(){return Object(m.jsx)("div",{children:Object(m.jsx)(L.a,{position:"absolute",children:Object(m.jsx)(A.a,{children:Object(m.jsxs)(B.a,{justify:"space-between",container:!0,spacing:0,children:[Object(m.jsx)(B.a,{item:!0,children:Object(m.jsx)(h.a,{component:"h1",variant:"h4",color:"inherit",noWrap:!0,children:"PropTech"})}),Object(m.jsx)(B.a,{item:!0})]})})})})}}]),a}(s.a.Component),W=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(m.jsx)("div",{children:Object(m.jsx)("h1",{children:"About"})})}}]),a}(s.a.Component),R=a(88),H=a(692),z=a(694),q=a(691),V=a(693),Y=a(690),K=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={user_list:[]},r.generateTableData=r.generateTableData.bind(Object(T.a)(r)),r.getUserList=r.getUserList.bind(Object(T.a)(r)),r.generateTableData(),r}return Object(c.a)(a,[{key:"getUserList",value:function(){var e=this;return new Promise((function(t,a){D.a.get("/users").then((function(a){e.setState({user_list:a.data.Users}),t()}))}))}},{key:"generateTableData",value:function(){var e=this;this.getUserList().then((function(){e.res1=[],e.res2=[];for(var t=0;t<e.state.user_list.length;t++){var a=e.state.user_list[t].Attributes.reduce((function(e,t){return Object.assign(e,Object(R.a)({},t.Name,t.Value))}),{});"True"==a["custom:is_activated"]?e.res2.push(Object(m.jsxs)(Y.a,{id:t,children:[Object(m.jsx)(q.a,{children:a.sub}),Object(m.jsx)(q.a,{children:a.email}),Object(m.jsx)(q.a,{children:a["custom:company_name"]}),Object(m.jsx)(q.a,{children:a["custom:street_name"]}),Object(m.jsx)(q.a,{children:a["custom:suite_number"]}),Object(m.jsx)(q.a,{children:a["custom:city"]}),Object(m.jsx)(q.a,{children:a["custom:state"]}),Object(m.jsx)(q.a,{children:a["custom:zipcode"]}),Object(m.jsx)(G,{sub:a.sub,username:a.email,company_name:a["custom:company_name"]})]},t)):e.res1.push(Object(m.jsxs)(Y.a,{id:t,children:[Object(m.jsx)(q.a,{children:a.sub}),Object(m.jsx)(q.a,{children:a.email}),Object(m.jsx)(q.a,{children:a["custom:company_name"]}),Object(m.jsx)(q.a,{children:a["custom:street_name"]}),Object(m.jsx)(q.a,{children:a["custom:suite_number"]}),Object(m.jsx)(q.a,{children:a["custom:city"]}),Object(m.jsx)(q.a,{children:a["custom:state"]}),Object(m.jsx)(q.a,{children:a["custom:zipcode"]}),Object(m.jsx)(Z,{generateTableData:e.generateTableData,sub:a.sub,email:a.email}),Object(m.jsx)($,{generateTableData:e.generateTableData,sub:a.sub,email:a.email})]},t))}e.forceUpdate()}))}},{key:"render",value:function(){return Object(m.jsx)("div",{children:Object(m.jsxs)(H.a,{children:[Object(m.jsx)(V.a,{children:Object(m.jsxs)(Y.a,{children:[Object(m.jsx)(q.a,{children:"UserId"}),Object(m.jsx)(q.a,{children:"Email"}),Object(m.jsx)(q.a,{children:"Company Name"}),Object(m.jsx)(q.a,{children:"Street Name"}),Object(m.jsx)(q.a,{children:"Suite Number"}),Object(m.jsx)(q.a,{children:"City"}),Object(m.jsx)(q.a,{children:"State"}),Object(m.jsx)(q.a,{children:"Zipcode"})]})}),Object(m.jsx)(z.a,{children:this.res1}),Object(m.jsx)(z.a,{children:this.res2})]})})}}]),a}(r.Component),$=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).decline_app=function(t,a){D.a.delete("/reject",{data:{sub:t,email:a}}).then((function(t){e.props.generateTableData()}))},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return Object(m.jsx)(q.a,{children:Object(m.jsx)(j.a,{color:"primary",onClick:function(){e.decline_app(e.props.sub,e.props.email)},children:"Reject Application"})})}}]),a}(r.Component),Z=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).accept_app=function(t,a){D.a.post("/activate",{sub:t,email:a}).then((function(t){e.props.generateTableData()}))},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return Object(m.jsx)(q.a,{children:Object(m.jsx)(j.a,{color:"primary",onClick:function(){e.accept_app(e.props.sub,e.props.email)},children:"Accept Application"})})}}]),a}(r.Component),G=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).viewManager=function(e,t,a){sessionStorage.setItem("username",t),sessionStorage.setItem("custom:company_name",a),window.location="/Admin/PropMana/".concat(e,"/property")},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return Object(m.jsx)(q.a,{children:Object(m.jsx)(j.a,{color:"primary",onClick:function(){e.viewManager(e.props.sub,e.props.username,e.props.company_name)},children:"View User"})})}}]),a}(r.Component),J=K,Q=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).manage_users=function(){window.location="/Admin/propertyManagers"},r.log_out=function(){sessionStorage.removeItem("admin_username"),sessionStorage.removeItem("admin_sub"),D.a.post("/logout").then((function(e){window.location="/"}))},r}return Object(c.a)(a,[{key:"render",value:function(){return Object(m.jsx)("div",{className:"sidenav",children:Object(m.jsx)("header",{children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("a",{href:"#",onClick:this.manage_users,children:"Manage Users"}),Object(m.jsx)("a",{href:"#",onClick:this.log_out,children:"Log Out"})]})})})}}]),a}(r.Component),X=a(28),ee=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r,s;Object(o.a)(this,a);var n=(r=t.call(this,e)).props.match.params.sub;return Object(X.e)(r.props.location.pathname,{path:"/Admin/propertyManagers",exact:!0,strict:!1})&&(s="manage_users"),r.state={sub:n,page:function(){switch(s){case"manage_users":return Object(m.jsx)(J,{display:Object(T.a)(r)})}}(),page_name:function(){switch(s){case"manage_users":return"Manage Users"}}()},sessionStorage.setItem("admin_sub",n),r}return Object(c.a)(a,[{key:"render",value:function(){return Object(m.jsxs)("div",{className:"topOffset leftOffset",children:[Object(m.jsxs)(h.a,{component:"h1",variant:"h5",color:"primary",children:["Welcome, Admin"," "+sessionStorage.getItem("admin_username"),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),this.state.page_name]}),Object(m.jsx)(p.a,{}),Object(m.jsxs)("div",{className:"Info_Page_Split",children:[Object(m.jsx)(Q,{}),Object(m.jsx)("div",{className:"display",children:this.state.page})]})]})}}]),a}(r.Component),te=a(110),ae=a(66),re=a(695),se=a(684),ne=Object(re.a)((function(e){return{typography:{padding:e.spacing(2)}}}));function ie(){var e=ne(),t=s.a.useState(null),a=Object(ae.a)(t,2),r=a[0],n=a[1],i=Boolean(r),o=i?"simple-popover":void 0;return Object(m.jsxs)("div",{children:[Object(m.jsx)(j.a,{"aria-describedby":o,variant:"contained",color:"primary",onClick:function(e){n(e.currentTarget)},children:"What's this?"}),Object(m.jsx)(se.a,{id:o,open:i,anchorEl:r,onClose:function(){n(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(m.jsx)(h.a,{className:e.typography,children:"RUBS is......"})})]})}var oe=a(706),ce=a(683),le=a(696),de=a(705),he=a(697),be=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={meter_list:r.props.meter_list,cur_meter_list:r.props.cur_meter_list,meter_id:"",property_id:r.props.property_id,tenant_id:r.props.tenant_id,onlyOption:r.props.onlyOption,select_meter_list:"",meter_error:!1,helper_text:"",chosen:!1},r.onChangeOnlyOption=r.onChangeOnlyOption.bind(Object(T.a)(r)),r.onChangeMultiOption=r.onChangeMultiOption.bind(Object(T.a)(r)),r.get_current_meter_list=r.get_current_meter_list.bind(Object(T.a)(r)),r.get_current_meter_list(),r.generateTable(),r}return Object(c.a)(a,[{key:"getMeterList",value:function(){var e=this;return new Promise((function(t,a){D.a.get("/meter/".concat(e.state.property_id)).then((function(a){e.setState({meter_list:a.data},(function(){t()}))}))}))}},{key:"getCurrentMeterList",value:function(){var e=this;return new Promise((function(t,a){D.a.get("/ass_meter/".concat(e.state.property_id)).then((function(a){var r=[];console.log(e.state.tenant_id,a.data);for(var s=0;s<a.data.length;s++)a.data[s].tenant_id==e.state.tenant_id&&r.push(a.data[s].meter_id);e.setState({cur_meter_list:r}),t()}))}))}},{key:"componentDidMount",value:function(){}},{key:"onChangeOnlyOption",value:function(e){this.setState({meter_id:e.target.value},(function(){this.props.methodfromparent(this.state.meter_id)}))}},{key:"onChangeMultiOption",value:function(e){e.preventDefault(),this.setState(Object(R.a)({},e.target.name,e.target.checked),(function(){this.props.methodfromparent(e.target.name)})),this.generateTable()}},{key:"get_current_meter_list",value:function(){var e=this;this.getCurrentMeterList().then((function(){for(var t=e.state.cur_meter_list,a=0;a<t.length;a++)e.setState(Object(R.a)({},t[a],!0)),console.log(t[a])})),this.forceUpdate()}},{key:"meter_submeter_validate",value:function(){var e=!0;return""===this.state.meter_id&&(this.setState({meter_error:!0,helper_text:"Please select associated meter number"}),e=!1),e}},{key:"generateTable",value:function(){var e=this,t=[];this.getMeterList().then((function(){var a=e.state.meter_list;if(!0===e.state.onlyOption){for(var r=0;r<a.length;r++)t.push(Object(m.jsx)(le.a,{name:a[r].meter_id,value:a[r].meter_id,control:Object(m.jsx)(de.a,{}),label:a[r].meter_id},a[r].meter_id));e.res=t,e.forceUpdate()}else e.cur=[],e.getCurrentMeterList().then((function(){for(var r=e.state.cur_meter_list,s=0;s<r.length;s++)e.cur.push(r[s]);console.log("meterlist:!! "+e.cur);for(s=0;s<a.length;s++){for(var n=!1,i=0;i<e.cur.length;i++)e.cur[i]===a[s].meter_id&&(n=!0);n?t.push(Object(m.jsx)(le.a,{control:Object(m.jsx)(oe.a,{checked:e.state[a[s].meter_id],onChange:e.onChangeMultiOption,name:a[s].meter_id,color:"primary"}),label:a[s].meter_id},a[s].meter_id)):t.push(Object(m.jsx)(le.a,{control:Object(m.jsx)(oe.a,{onChange:e.onChangeMultiOption,name:a[s].meter_id,color:"primary"}),label:a[s].meter_id},a[s].meter_id))}e.res=t,e.forceUpdate()}))}))}},{key:"render",value:function(){return Object(m.jsx)("div",{children:this.state.onlyOption?Object(m.jsx)("div",{children:Object(m.jsxs)(I.a,{children:[Object(m.jsx)(ce.a,{children:"Which meter number is associated with this submeter?"}),Object(m.jsx)(he.a,{"aria-label":"meter",onChange:this.onChangeOnlyOption,children:this.res})]})}):Object(m.jsx)("div",{children:Object(m.jsxs)(I.a,{children:[Object(m.jsx)(ce.a,{children:"Which meter number is associated with this tenant?"}),this.res]})})})}}]),a}(s.a.Component),ue=a(699),je=a(698),pe=a(648),me=a(685),_e=a(54),Oe=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={open:!1,meter_list:[],cur_meter_list:[],tenant_id:r.props.tenant_id,name:r.props.name,email:r.props.email,address:r.props.address,landlord_phone:r.props.landlord_phone,rubs:r.props.rubs,property_id:r.props.property_id,yes:!1,no:!1,yesprorata:!1,noprorata:!1,tenantFt:"",nameError:"",addressError:"",emailError:"",phoneError:"",name_errors:!1,address_errors:!1,email_errors:!1,phone_errors:!1,choice_errors:!1,helper_text:"",rubs_errors:!1,rubs_helper_text:"",percent_errors:!1,percent_helper_text:"",meter_errors:!1,meter_helper_text:"",is_meter_tenant:r.props.is_meter_tenant,is_submeter_tenant:r.props.is_submeter_tenant},r.handleClickOpen=r.handleClickOpen.bind(Object(T.a)(r)),r.handleClose=r.handleClose.bind(Object(T.a)(r)),r.changeName=r.changeName.bind(Object(T.a)(r)),r.changeEmail=r.changeEmail.bind(Object(T.a)(r)),r.changeAddress=r.changeAddress.bind(Object(T.a)(r)),r.changeLandlordPhone=r.changeLandlordPhone.bind(Object(T.a)(r)),r.changeRubs=r.changeRubs.bind(Object(T.a)(r)),r.onSubmit=r.onSubmit.bind(Object(T.a)(r)),r.validation=r.validation.bind(Object(T.a)(r)),r.changeRUBS=r.changeRUBS.bind(Object(T.a)(r)),r.getAssociatedMeter=r.getAssociatedMeter.bind(Object(T.a)(r)),r.onChangeYes=r.onChangeYes.bind(Object(T.a)(r)),r.onChangeNo=r.onChangeNo.bind(Object(T.a)(r)),r.changeTenantFt=r.changeTenantFt.bind(Object(T.a)(r)),r.onChangeYesProrata=r.onChangeYesProrata.bind(Object(T.a)(r)),r.onChangeNoProrata=r.onChangeNoProrata.bind(Object(T.a)(r)),r.calculate=r.calculate.bind(Object(T.a)(r)),r.getMeterList=r.getMeterList.bind(Object(T.a)(r)),r}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(){this.props.tenant_id!==this.state.tenant_id&&this.setState({tenant_id:this.props.tenant_id,name:this.props.name,email:this.props.email,address:this.props.address,landlord_phone:this.props.landlord_phone,rubs:this.props.rubs,property_id:this.props.property_id,yes:this.props.yes,no:this.props.no,yesprorata:this.props.yesprorata,noprorata:this.props.noprorata,tenantFt:this.props.tenantFt})}},{key:"updateTenantInfo",value:function(e,t){var a=this;console.log("meterlistttttt"+this.state.meter_list),D.a.patch("/tenant",{sub:this.props.sub,tenant_id:e,tenant_info:t,meter_list:this.state.meter_list}).then((function(e){a.props.generateTableData()}))}},{key:"handleClickOpen",value:function(){var e=this,t=[];this.getMeterList().then((function(){for(var a=e.state.meter_list,r=0;r<a.length;r++)t.push(a[r]);e.cur=t,e.forceUpdate()})),0===this.state.rubs?this.setState({yesprorata:!1,noprorata:!0}):this.setState({yesprorata:!0,noprorata:!1,yes:!0}),this.setState({open:!0,cur_meter_list:this.cur})}},{key:"handleClose",value:function(){this.setState({open:!1,nameError:"",addressError:"",emailError:"",phoneError:"",name_errors:!1,address_errors:!1,email_errors:!1,phone_errors:!1,meter_errors:!1,meter_helper_text:""})}},{key:"changeName",value:function(e){this.setState({name:e.target.value,nameError:"",name_errors:!1})}},{key:"changeEmail",value:function(e){this.setState({email:e.target.value,emailError:"",email_errors:!1})}},{key:"changeAddress",value:function(e){this.setState({address:e.target.value,addressError:"",address_errors:!1})}},{key:"changeLandlordPhone",value:function(e){this.setState({landlord_phone:e.target.value,phoneError:"",phone_errors:!1})}},{key:"changeRubs",value:function(e){this.setState({rubs:e.target.value})}},{key:"changeRUBS",value:function(e){e.preventDefault();var t=parseFloat(e.target.value)/100;console.log("rubs is "+t),this.setState({rubs:t,percent_errors:!1,percent_helper_text:""})}},{key:"changeTenantFt",value:function(e){e.preventDefault();var t=this.props.total_footage,a=e.target.value;if(""!=a){var r=a/t;this.setState({rubs:r})}this.setState({tenantFt:e.target.value,percent_errors:!1,percent_helper_text:""})}},{key:"calculate",value:function(e){var t=this.props.total_footage,a=this.state.tenantFt;if(""!=a){var r=a/t;this.setState({rubs:r}),this.forceUpdate(),console.log(a/t)}e.preventDefault()}},{key:"getAssociatedMeter",value:function(e){for(var t=this.state.meter_list,a=!1,r=0;r<t.length;r++)t[r]===e&&(t.splice(r,1),a=!0);a?this.setState({meter_list:t}):this.setState((function(t){return{meter_list:[e].concat(Object(te.a)(t.meter_list))}}))}},{key:"onChangeYes",value:function(e){e.preventDefault(),this.setState({yes:e.target.checked,no:!1,rubs_errors:!1,rubs_helper_text:""})}},{key:"onChangeNo",value:function(e){e.preventDefault(),this.setState({no:e.target.checked,yes:!1,rubs_errors:!1,rubs_helper_text:""})}},{key:"onChangeYesProrata",value:function(e){e.preventDefault(),this.setState({yesprorata:e.target.checked,noprorata:!1,choice_errors:!1,helper_text:""})}},{key:"onChangeNoProrata",value:function(e){e.preventDefault(),this.setState({noprorata:e.target.checked,yesprorata:!1,choice_errors:!1,helper_text:""})}},{key:"validation",value:function(){var e=!0,t=new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i),a=new RegExp(/^[a-z ,.'-]+$/i);if(""===this.state.name||!a.test(this.state.name)){this.setState({nameError:"Please enter a valid name",name_errors:!0}),e=!1}if(""===this.state.email){var r="Please enter a valid email address";this.setState({emailError:r,email_errors:!0}),e=!1}if(!t.test(this.state.email)){r="Please enter a valid email address";this.setState({emailError:r,email_errors:!0}),e=!1}if(""===this.state.address){this.setState({addressError:"Please enter a valid address",address_errors:!0}),e=!1}var s=new RegExp(/^[(]{0,1}[0-9]{3}[)]{0,1}[-\s\.]{0,1}[0-9]{3}[-\s\.]{0,1}[0-9]{4}$/);if(""===this.state.landlord_phone||!s.test(this.state.landlord_phone)){this.setState({phoneError:"Please enter a valid phone number",phone_errors:!0}),e=!1}if(!this.state.yesprorata&&!this.state.noprorata){this.setState({choice_errors:!0,helper_text:"Please choose an option"}),e=!1}return e}},{key:"getMeterList",value:function(){var e=this;return new Promise((function(t,a){D.a.get("/ass_meter/".concat(e.state.property_id)).then((function(a){var r=[];console.log(e.state.tenant_id,a.data);for(var s=0;s<a.data.length;s++)a.data[s].tenant_id==e.state.tenant_id&&r.push(a.data[s].meter_id);e.setState({meter_list:r}),t()}))}))}},{key:"onSubmit",value:function(e){e.preventDefault();if(0!==this.state.meter_list.length&&this.setState({meter_errors:!0,meter_helper_text:""}),this.validation())if(this.state.noprorata&&!this.state.yesprorata){this.setState({open:!1,nameError:"",addressError:"",emailError:"",phoneError:"",name_errors:!1,address_errors:!1,email_errors:!1,phone_errors:!1,choice_errors:!1,helper_text:"",rubs_errors:!1,rubs_helper_text:"",percent_errors:!1,percent_helper_text:"",meter_errors:!1,meter_helper_text:""});var t={name:this.state.name,email:this.state.email,address:this.state.address,landlord_phone:this.state.landlord_phone,rubs:this.state.rubs,property_id:this.state.property_id},a=this.state.tenant_id;this.updateTenantInfo(a,t)}else if(0===this.state.meter_list.length){console.log("meter_list length: "+this.state.meter_list);this.setState({meter_errors:!0,meter_helper_text:"Please select at least one meter number"})}else if(!this.state.yesprorata||this.state.yes||this.state.no)if(this.state.yesprorata)if(""===this.state.tenantFt&&(""===this.state.rubs||this.state.rubs>1||this.state.rubs<0)){r="Please enter a valid percentage";this.setState({percent_errors:!0,percent_helper_text:r})}else if(""!==this.state.rubs&&this.state.rubs||!(""===this.state.tenantFt||this.state.tenantFt>this.props.total_footage))if(""!==this.state.rubs&&(this.state.rubs>1||this.state.rubs<0)){r="Please enter a valid number";this.setState({percent_errors:!0,percent_helper_text:r})}else{this.setState({open:!1,nameError:"",addressError:"",emailError:"",phoneError:"",name_errors:!1,address_errors:!1,email_errors:!1,phone_errors:!1,choice_errors:!1,helper_text:"",rubs_errors:!1,rubs_helper_text:"",percent_errors:!1,percent_helper_text:"",meter_errors:!1,meter_helper_text:""});t={name:this.state.name,email:this.state.email,address:this.state.address,landlord_phone:this.state.landlord_phone,rubs:this.state.rubs,property_id:this.state.property_id},a=this.state.tenant_id;this.updateTenantInfo(a,t)}else{var r="Please enter a valid number";this.setState({percent_errors:!0,percent_helper_text:r})}else{this.setState({open:!1,nameError:"",addressError:"",emailError:"",phoneError:"",name_errors:!1,address_errors:!1,email_errors:!1,phone_errors:!1,choice_errors:!1,helper_text:"",rubs_errors:!1,rubs_helper_text:"",percent_errors:!1,percent_helper_text:"",meter_errors:!1,meter_helper_text:""});t={name:this.state.name,email:this.state.email,address:this.state.address,landlord_phone:this.state.landlord_phone,rubs:0,property_id:this.state.property_id},a=this.state.tenant_id;this.updateTenantInfo(a,t),this.setState({meter_list:[]})}else{var r="Please choose an option";this.setState({rubs_errors:!0,rubs_helper_text:r})}}},{key:"render",value:function(){var e=this.state.yes,t=this.state.no,a=this.state.yesprorata,r=this.state.noprorata,s=this.state.name_errors,n=this.state.address_errors,i=this.state.email_errors,o=this.state.phone_errors,c=this.state.nameError,l=this.state.addressError,d=this.state.emailError,h=this.state.phoneError,b=this.state.choice_errors,u=this.state.helper_text,_=this.state.rubs_errors,O=this.state.rubs_helper_text,g=this.state.percent_errors,x=this.state.percent_helper_text,f=this.state.meter_errors,v=this.state.meter_helper_text;return Object(m.jsxs)("div",{children:[Object(m.jsx)(j.a,{color:"primary",onClick:this.handleClickOpen,children:"Edit"}),Object(m.jsxs)(w.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",children:[Object(m.jsx)(je.a,{id:"form-dialog-title",children:"Enter Tenant Information"}),Object(m.jsxs)(p.a,{children:[Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"name",label:"Name",type:"text",value:this.state.name,onChange:this.changeName,helperText:s?c:null,error:this.state.name_errors,fullWidth:!0}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"email",label:"Email Address",type:"email",value:this.state.email,onChange:this.changeEmail,helperText:i?d:null,error:this.state.email_errors,fullWidth:!0}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"address",label:"Address",type:"text",value:this.state.address,onChange:this.changeAddress,helperText:n?l:null,error:this.state.address_errors,fullWidth:!0}),Object(m.jsx)(_e.a,{customInput:S.a,autoFocus:!0,margin:"dense",id:"landlord_phone",label:"Landlord Phone",type:"text",value:this.state.landlord_phone,onChange:this.changeLandlordPhone,helperText:o?h:null,error:this.state.phone_errors,fullWidth:!0,format:"(###) ###-####"}),Object(m.jsx)(p.a,{}),Object(m.jsxs)(I.a,{error:b,children:[Object(m.jsxs)(ce.a,{children:["Is this Tenant Billed based off a Percentage (Pro-Rata) Share of Building?",Object(m.jsx)(k.a,{}),Object(m.jsx)(ie,{})]}),Object(m.jsx)(me.a,{children:u}),Object(m.jsxs)(pe.a,{row:!0,children:[Object(m.jsx)(le.a,{disabled:!0,control:Object(m.jsx)(oe.a,{checked:this.state.yesprorata,onChange:this.onChangeYesProrata,name:"yes",color:"primary"}),label:"yes"}),Object(m.jsx)(le.a,{disabled:!0,control:Object(m.jsx)(oe.a,{checked:this.state.noprorata,onChange:this.onChangeNoProrata,name:"no",color:"primary"}),label:"no"})]}),Object(m.jsx)(p.a,{}),Object(m.jsxs)("div",{children:[a?Object(m.jsxs)("div",{children:[Object(m.jsxs)(I.a,{error:f,children:[Object(m.jsx)(be,{property_id:this.props.property_id,onlyOption:!1,cur_meter_list:this.state.cur_meter_list,tenant_id:this.state.tenant_id,methodfromparent:this.getAssociatedMeter}),Object(m.jsx)(me.a,{children:v})]}),Object(m.jsx)(p.a,{}),Object(m.jsxs)(I.a,{error:_,children:[Object(m.jsxs)(ce.a,{children:["Do you have the percentage share of building of this tenant?",Object(m.jsx)(k.a,{}),Object(m.jsx)(ie,{})]}),Object(m.jsx)(me.a,{children:O}),Object(m.jsxs)(pe.a,{row:!0,children:[Object(m.jsx)(le.a,{control:Object(m.jsx)(oe.a,{checked:this.state.yes,onChange:this.onChangeYes,name:"yes",color:"primary"}),label:"yes"}),Object(m.jsx)(le.a,{control:Object(m.jsx)(oe.a,{checked:this.state.no,onChange:this.onChangeNo,name:"no",color:"primary"}),label:"no"})]}),Object(m.jsx)(p.a,{}),Object(m.jsxs)("div",{children:[e?Object(m.jsx)("div",{children:Object(m.jsx)(_e.a,{customInput:S.a,autoFocus:!0,margin:"dense",id:"rubs",label:"Enter Percentage Share of Building",type:"text",fullWidth:!0,onChange:this.changeRUBS,helperText:g?x:null,error:this.state.percent_errors,suffix:"%",value:100*this.state.rubs})}):null,t?Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{children:["Total buildings square footage: ",this.props.total_footage]}),Object(m.jsx)(_e.a,{customInput:S.a,autoFocus:!0,margin:"dense",id:"tenantFt",label:"Enter tenant square footage",type:"text",onChange:this.changeTenantFt,fullWidth:!0,helperText:g?x:null,error:this.state.percent_errors}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",label:"Percentage share",fullWidth:!0,value:100*this.state.rubs+"%"})]}):null]})]})]}):null,r?Object(m.jsx)("div",{}):null]})]})]}),Object(m.jsxs)(ue.a,{children:[Object(m.jsx)(j.a,{onClick:this.handleClose,color:"primary",children:"Cancel"}),Object(m.jsx)(j.a,{onClick:this.onSubmit,color:"primary",children:"Update"})]})]})]})}}]),a}(s.a.Component),ge=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={open:!1,name:"",email:"",address:"",landlord_phone:sessionStorage.getItem("landlord_phone"),rubs:"",multiplier:"",meter_id:"",meter_list:[],yes:!1,no:!1,yesprorata:!1,noprorata:!1,tenantFt:"",nameError:"",addressError:"",emailError:"",phoneError:"",name_errors:!1,address_errors:!1,email_errors:!1,phone_errors:!1,choice_errors:!1,helper_text:"",rubs_errors:!1,rubs_helper_text:"",percent_errors:!1,percent_helper_text:"",meter_errors:!1,meter_helper_text:""},r.handleClickOpen=r.handleClickOpen.bind(Object(T.a)(r)),r.handleClose=r.handleClose.bind(Object(T.a)(r)),r.changeName=r.changeName.bind(Object(T.a)(r)),r.changeEmail=r.changeEmail.bind(Object(T.a)(r)),r.changeAddress=r.changeAddress.bind(Object(T.a)(r)),r.changeLandlordPhone=r.changeLandlordPhone.bind(Object(T.a)(r)),r.changeMultiplier=r.changeMultiplier.bind(Object(T.a)(r)),r.onSubmit=r.onSubmit.bind(Object(T.a)(r)),r.getAssociatedMeter=r.getAssociatedMeter.bind(Object(T.a)(r)),r.onChangeYes=r.onChangeYes.bind(Object(T.a)(r)),r.onChangeNo=r.onChangeNo.bind(Object(T.a)(r)),r.changeRUBS=r.changeRUBS.bind(Object(T.a)(r)),r.changeTenantFt=r.changeTenantFt.bind(Object(T.a)(r)),r.calculate=r.calculate.bind(Object(T.a)(r)),r.changeMeter_List=r.changeMeter_List.bind(Object(T.a)(r)),r.validation=r.validation.bind(Object(T.a)(r)),r.onChangeYesProrata=r.onChangeYesProrata.bind(Object(T.a)(r)),r.onChangeNoProrata=r.onChangeNoProrata.bind(Object(T.a)(r)),r}return Object(c.a)(a,[{key:"addTenant",value:function(e){var t=this;D.a.post("/tenant",{sub:this.props.sub,property_id:this.props.property_id,tenant_info:e,meter_list:this.state.meter_list}).then((function(e){t.props.generateTableData()}))}},{key:"handleClickOpen",value:function(){this.setState({open:!0})}},{key:"handleClose",value:function(){this.setState({open:!1,name:"",address:"",email:"",landlord_phone:sessionStorage.getItem("landlord_phone"),rubs:"",tenantFt:"",meter_list:[],nameError:"",addressError:"",emailError:"",phoneError:"",name_errors:!1,address_errors:!1,email_errors:!1,phone_errors:!1,choice_errors:!1,helper_text:"",rubs_errors:!1,rubs_helper_text:"",yesprorata:!1,noprorata:!1,yes:!1,no:!1,percent_errors:!1,percent_helper_text:"",meter_errors:!1,meter_helper_text:""})}},{key:"changeName",value:function(e){this.setState({name:e.target.value,nameError:"",name_errors:!1})}},{key:"changeMeter_List",value:function(e){this.setState({meter_list:e})}},{key:"changeEmail",value:function(e){this.setState({email:e.target.value,emailError:"",email_errors:!1})}},{key:"changeAddress",value:function(e){this.setState({address:e.target.value,addressError:"",address_errors:!1})}},{key:"changeLandlordPhone",value:function(e){this.setState({landlord_phone:e.target.value,phoneError:"",phone_errors:!1})}},{key:"changeMultiplier",value:function(e){this.setState({multiplier:e.target.value})}},{key:"onSubmit",value:function(e){if(e.preventDefault(),console.log(this.state.meter_list),0!==this.state.meter_list.length&&this.setState({meter_errors:!0,meter_helper_text:""}),this.validation())if(this.state.noprorata&&!this.state.yesprorata){var t={name:this.state.name,email:this.state.email,address:this.state.address,landlord_phone:this.state.landlord_phone,rubs:this.state.rubs};this.addTenant(t),this.setState({meter_list:[],open:!1,name:"",address:"",email:"",landlord_phone:sessionStorage.getItem("landlord_phone"),rubs:"",tenantFt:"",nameError:"",addressError:"",emailError:"",phoneError:"",name_errors:!1,address_errors:!1,email_errors:!1,phone_errors:!1,choice_errors:!1,helper_text:"",rubs_errors:!1,rubs_helper_text:"",yesprorata:!1,noprorata:!1,yes:!1,no:!1,percent_errors:!1,percent_helper_text:"",meter_errors:!1,meter_helper_text:""})}else if(0===this.state.meter_list.length){console.log("meter_list length: "+this.state.meter_list);this.setState({meter_errors:!0,meter_helper_text:"Please select at least one meter number"})}else if(!this.state.yesprorata||this.state.yes||this.state.no)if(this.state.yesprorata)if(""===this.state.tenantFt&&(""===this.state.rubs||this.state.rubs>1||this.state.rubs<0)){a="Please enter a valid percentage";this.setState({percent_errors:!0,percent_helper_text:a})}else if(""!==this.state.rubs&&this.state.rubs||!(""===this.state.tenantFt||this.state.tenantFt>this.props.total_footage))if(""!==this.state.rubs&&(this.state.rubs>1||this.state.rubs<0)){a="Please enter a valid number";this.setState({percent_errors:!0,percent_helper_text:a})}else{t={name:this.state.name,email:this.state.email,address:this.state.address,landlord_phone:this.state.landlord_phone,rubs:this.state.rubs};this.addTenant(t),this.setState({meter_list:[],open:!1,name:"",address:"",email:"",landlord_phone:sessionStorage.getItem("landlord_phone"),rubs:"",tenantFt:"",nameError:"",addressError:"",emailError:"",phoneError:"",name_errors:!1,address_errors:!1,email_errors:!1,phone_errors:!1,choice_errors:!1,helper_text:"",rubs_errors:!1,rubs_helper_text:"",yesprorata:!1,noprorata:!1,yes:!1,no:!1,percent_errors:!1,percent_helper_text:"",meter_errors:!1,meter_helper_text:""})}else{var a="Please enter a valid number";this.setState({percent_errors:!0,percent_helper_text:a})}else{t={name:this.state.name,email:this.state.email,address:this.state.address,landlord_phone:this.state.landlord_phone,rubs:this.state.rubs};this.addTenant(t),this.setState({meter_list:[],open:!1,name:"",address:"",email:"",landlord_phone:sessionStorage.getItem("landlord_phone"),rubs:"",tenantFt:"",nameError:"",addressError:"",emailError:"",phoneError:"",name_errors:!1,address_errors:!1,email_errors:!1,phone_errors:!1,choice_errors:!1,helper_text:"",rubs_errors:!1,rubs_helper_text:"",yesprorata:!1,noprorata:!1,yes:!1,no:!1,percent_errors:!1,percent_helper_text:"",meter_errors:!1,meter_helper_text:""})}else{var a="Please choose an option";this.setState({rubs_errors:!0,rubs_helper_text:a})}}},{key:"getAssociatedMeter",value:function(e){for(var t=this.state.meter_list,a=!1,r=0;r<t.length;r++)t[r]===e&&(t.splice(r,1),a=!0);a?this.setState({meter_list:t}):this.setState((function(t){return{meter_list:[e].concat(Object(te.a)(t.meter_list))}}))}},{key:"changeRUBS",value:function(e){e.preventDefault();var t=parseFloat(e.target.value)/100;console.log("rubs is "+t),this.setState({rubs:t,percent_errors:!1,percent_helper_text:""})}},{key:"changeTenantFt",value:function(e){e.preventDefault();var t=this.props.total_footage,a=e.target.value;if(""!=a){var r=a/t;this.setState({rubs:r})}this.setState({tenantFt:e.target.value,percent_errors:!1,percent_helper_text:""})}},{key:"calculate",value:function(e){var t=this.props.total_footage,a=this.state.tenantFt;if(""!=a){var r=a/t;this.setState({rubs:r}),this.forceUpdate(),console.log(a/t)}e.preventDefault()}},{key:"onChangeYes",value:function(e){e.preventDefault(),this.setState({yes:e.target.checked,no:!1,rubs_errors:!1,rubs_helper_text:""})}},{key:"onChangeNo",value:function(e){e.preventDefault(),this.setState({no:e.target.checked,yes:!1,rubs_errors:!1,rubs_helper_text:""})}},{key:"onChangeYesProrata",value:function(e){e.preventDefault(),this.setState({yesprorata:e.target.checked,noprorata:!1,choice_errors:!1,helper_text:""})}},{key:"onChangeNoProrata",value:function(e){e.preventDefault(),this.setState({noprorata:e.target.checked,yesprorata:!1,choice_errors:!1,helper_text:""})}},{key:"validation",value:function(){var e=!0,t=new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i),a=new RegExp(/^[a-z ,.'-]+$/i);if(""===this.state.name||!a.test(this.state.name)){this.setState({nameError:"Please enter a valid name",name_errors:!0}),e=!1}if(""===this.state.email){var r="Please enter a valid email address";this.setState({emailError:r,email_errors:!0}),e=!1}if(!t.test(this.state.email)){r="Please enter a valid email address";this.setState({emailError:r,email_errors:!0}),e=!1}if(""===this.state.address){this.setState({addressError:"Please enter a valid address",address_errors:!0}),e=!1}var s=new RegExp(/^[(]{0,1}[0-9]{3}[)]{0,1}[-\s\.]{0,1}[0-9]{3}[-\s\.]{0,1}[0-9]{4}$/);if(""===this.state.landlord_phone||!s.test(this.state.landlord_phone)){this.setState({phoneError:"Please enter a valid phone number",phone_errors:!0}),e=!1}if(!this.state.yesprorata&&!this.state.noprorata){this.setState({choice_errors:!0,helper_text:"Please choose an option"}),e=!1}return e}},{key:"render",value:function(){var e=this.state.yes,t=this.state.no,a=this.state.yesprorata,r=this.state.noprorata,s=this.state.name_errors,n=this.state.address_errors,i=this.state.email_errors,o=this.state.phone_errors,c=this.state.nameError,l=this.state.addressError,d=this.state.emailError,h=this.state.phoneError,b=this.state.choice_errors,u=this.state.helper_text,_=this.state.rubs_errors,O=this.state.rubs_helper_text,g=this.state.percent_errors,x=this.state.percent_helper_text,f=this.state.meter_errors,v=this.state.meter_helper_text;return Object(m.jsxs)("div",{children:[Object(m.jsx)(j.a,{color:"primary",onClick:this.handleClickOpen,children:"Add Tenant"}),Object(m.jsxs)(w.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",children:[Object(m.jsx)(je.a,{id:"form-dialog-title",children:"Enter Tenant Information"}),Object(m.jsxs)(p.a,{children:[Object(m.jsx)(k.a,{}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"name",label:"Name",type:"text",onChange:this.changeName,helperText:s?c:null,error:this.state.name_errors,fullWidth:!0,required:!0}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"email",label:"Email Address",type:"email",onChange:this.changeEmail,helperText:i?d:null,error:this.state.email_errors,fullWidth:!0,required:!0}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"address",label:"Address",type:"text",onChange:this.changeAddress,helperText:n?l:null,error:this.state.address_errors,fullWidth:!0,required:!0}),Object(m.jsx)(_e.a,{customInput:S.a,autoFocus:!0,margin:"dense",id:"landlord_phone",label:"Landlord Phone",type:"text",value:this.state.landlord_phone,onChange:this.changeLandlordPhone,helperText:o?h:null,error:this.state.phone_errors,fullWidth:!0,format:"(###) ###-####",required:!0}),Object(m.jsx)(p.a,{}),Object(m.jsxs)(I.a,{error:b,children:[Object(m.jsxs)(ce.a,{children:["Is this Tenant Billed based off a Percentage (Pro-Rata) Share of Building?",Object(m.jsx)(k.a,{}),Object(m.jsx)(ie,{})]}),Object(m.jsx)(me.a,{children:u}),Object(m.jsxs)(pe.a,{row:!0,children:[Object(m.jsx)(le.a,{control:Object(m.jsx)(oe.a,{checked:this.state.yesprorata,onChange:this.onChangeYesProrata,name:"yes",color:"primary"}),label:"yes"}),Object(m.jsx)(le.a,{control:Object(m.jsx)(oe.a,{checked:this.state.noprorata,onChange:this.onChangeNoProrata,name:"no",color:"primary"}),label:"no"})]}),Object(m.jsx)(p.a,{}),Object(m.jsxs)("div",{children:[a?Object(m.jsxs)("div",{children:[Object(m.jsxs)(I.a,{error:f,children:[Object(m.jsx)(be,{property_id:this.props.property_id,onlyOption:!1,methodfromparent:this.getAssociatedMeter}),Object(m.jsx)(me.a,{children:v})]}),Object(m.jsx)(p.a,{}),Object(m.jsxs)(I.a,{error:_,children:[Object(m.jsxs)(ce.a,{children:["Do you have the percentage share of building of this tenant?",Object(m.jsx)(k.a,{}),Object(m.jsx)(ie,{})]}),Object(m.jsx)(me.a,{children:O}),Object(m.jsxs)(pe.a,{row:!0,children:[Object(m.jsx)(le.a,{control:Object(m.jsx)(oe.a,{checked:this.state.yes,onChange:this.onChangeYes,name:"yes",color:"primary"}),label:"yes"}),Object(m.jsx)(le.a,{control:Object(m.jsx)(oe.a,{checked:this.state.no,onChange:this.onChangeNo,name:"no",color:"primary"}),label:"no"})]}),Object(m.jsx)(p.a,{}),Object(m.jsxs)("div",{children:[e?Object(m.jsx)("div",{children:Object(m.jsx)(_e.a,{customInput:S.a,autoFocus:!0,margin:"dense",id:"rubs",label:"Enter Percentage Share of Building",type:"text",fullWidth:!0,onChange:this.changeRUBS,helperText:g?x:null,error:this.state.percent_errors,suffix:"%"})}):null,t?Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{children:["Total buildings square footage: ",this.props.total_footage]}),Object(m.jsx)(_e.a,{customInput:S.a,autoFocus:!0,margin:"dense",id:"tenantFt",label:"Enter tenant square footage",type:"text",onChange:this.changeTenantFt,fullWidth:!0,helperText:g?x:null,error:this.state.percent_errors}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",label:"Percentage share",fullWidth:!0,value:100*this.state.rubs+"%"})]}):null]})]})]}):null,r?Object(m.jsx)("div",{}):null]})]})]}),Object(m.jsxs)(ue.a,{children:[Object(m.jsx)(j.a,{onClick:this.handleClose,color:"primary",children:"Cancel"}),Object(m.jsx)(j.a,{onClick:this.onSubmit,color:"primary",children:"Add"})]})]})]})}}]),a}(s.a.Component),xe=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={open:!1},r.handleClickOpen=r.handleClickOpen.bind(Object(T.a)(r)),r.handleClose=r.handleClose.bind(Object(T.a)(r)),r.onSubmit=r.onSubmit.bind(Object(T.a)(r)),r}return Object(c.a)(a,[{key:"deleteTenant",value:function(){var e=this;D.a.delete("/tenant",{data:{sub:this.props.sub,tenant_id:this.props.tenant_id,property_id:this.props.property_id}}).then((function(t){e.props.generateTableData()}))}},{key:"handleClickOpen",value:function(){this.setState({open:!0})}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"onSubmit",value:function(){this.setState({open:!1}),this.deleteTenant()}},{key:"render",value:function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(j.a,{color:"secondary",onClick:this.handleClickOpen,children:"Delete"}),Object(m.jsxs)(w.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(m.jsx)(je.a,{id:"alert-dialog-title",children:"Delete Tenant"}),Object(m.jsx)(p.a,{children:Object(m.jsx)(k.a,{id:"alert-dialog-description",children:"Are you sure you want to delete the chosen tenant?"})}),Object(m.jsxs)(ue.a,{children:[Object(m.jsx)(j.a,{onClick:this.handleClose,color:"primary",children:"Back"}),Object(m.jsx)(j.a,{color:"secondary",onClick:this.onSubmit,autoFocus:!0,children:"Delete"})]})]})]})}}]),a}(s.a.Component),fe=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={open:!1},r.handleClickOpen=r.handleClickOpen.bind(Object(T.a)(r)),r.handleClose=r.handleClose.bind(Object(T.a)(r)),r.deleteSubmeter=r.deleteSubmeter.bind(Object(T.a)(r)),r.onSubmit=r.onSubmit.bind(Object(T.a)(r)),r}return Object(c.a)(a,[{key:"deleteSubmeter",value:function(){var e=this;D.a.delete("/delete_submeter",{data:{sub:this.props.sub,tenant_id:this.props.tenant_id,submeter_id:this.props.submeter_id}}).then((function(t){e.props.generateTableData()}))}},{key:"handleClickOpen",value:function(){this.setState({open:!0})}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"onSubmit",value:function(){this.setState({open:!1}),this.deleteSubmeter()}},{key:"render",value:function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(j.a,{color:"secondary",onClick:this.handleClickOpen,children:"Delete"}),Object(m.jsxs)(w.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(m.jsx)(je.a,{id:"alert-dialog-title",children:"Delete Submeter"}),Object(m.jsx)(p.a,{children:Object(m.jsx)(k.a,{id:"alert-dialog-description",children:"Are you sure you want to delete this submeter?"})}),Object(m.jsxs)(ue.a,{children:[Object(m.jsx)(j.a,{onClick:this.handleClose,color:"primary",children:"Back"}),Object(m.jsx)(j.a,{onClick:this.onSubmit,color:"secondary",autoFocus:!0,children:"Delete"})]})]})]})}}]),a}(s.a.Component),ve=(s.a.Component,function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={from_date:"",to_date:"",submeter_id:"",bill_id:"",unit_charge:"",bill_list:[],meter_id:r.props.meter_id,onlyOption:!0},r.onChangeOnlyOption=r.onChangeOnlyOption.bind(Object(T.a)(r)),r.getBillList=r.getBillList.bind(Object(T.a)(r)),r.set_timeperiod=r.set_timeperiod.bind(Object(T.a)(r)),r}return Object(c.a)(a,[{key:"getBillList",value:function(){var e=this;return console.log(this.state.meter_id),new Promise((function(t,a){D.a.get("/meterbill_list/".concat(e.state.meter_id)).then((function(a){console.log("response from database: ",a.data),e.setState({bill_list:a.data},(function(){console.log("bill list",e.state.bill_list),t()}))}))}))}},{key:"set_timeperiod",value:function(e){for(var t=0;t<this.state.bill_list.length;t++)this.state.bill_list[t].bill_id==e&&(console.log("the match bill_id: ",e),this.setState({unit_charge:this.state.bill_list[t].unit_charge,from_date:this.state.bill_list[t].from_date,to_date:this.state.bill_list[t].to_date}))}},{key:"componentDidMount",value:function(){this.generateTable()}},{key:"onChangeOnlyOption",value:function(e){console.log("checkbox bill_id: ",e.target.value),this.set_timeperiod(e.target.value),this.setState({bill_id:e.target.value},(function(){this.props.changeBillId(this.state.bill_id),this.props.changeFromDate(this.state.from_date),this.props.changeTodate(this.state.to_date),this.props.changeUnitCharge(this.state.unit_charge)}))}},{key:"generateTable",value:function(){var e=this,t=[];console.log(this.state.bill_list),this.getBillList().then((function(){var a=e.state.bill_list;console.log(a.length);for(var r=0;r<a.length;r++)console.log("from date",a[r].from_date),t.push(Object(m.jsx)(le.a,{value:String(a[r].bill_id),control:Object(m.jsx)(de.a,{}),label:String(a[r].from_date.split("T")[0]+" to "+a[r].to_date.split("T")[0])},String(a[r].bill_id)));e.res=t,console.log(e.res),e.forceUpdate()}))}},{key:"render",value:function(){return Object(m.jsx)("div",{children:this.state.onlyOption?Object(m.jsx)("div",{children:Object(m.jsxs)(I.a,{children:[Object(m.jsx)(ce.a,{children:"Which time period this submeter bill assign to?"}),Object(m.jsx)(he.a,{"aria-label":"bill_id",onChange:this.onChangeOnlyOption,children:this.res})]})}):Object(m.jsx)("div",{})})}}]),a}(s.a.Component)),ye=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={open:!1,submeter_bill_id:"",bill_id:"",submeter_id:r.props.submeter_id,prior_read:"",current_read:"",from_date:"",to_date:"",amt_due:"",meter_id:r.props.meter_id,multiplier:r.props.multiplier,unit_charge:""},r.handleClickOpen=r.handleClickOpen.bind(Object(T.a)(r)),r.handleClose=r.handleClose.bind(Object(T.a)(r)),r.changePriorRead=r.changePriorRead.bind(Object(T.a)(r)),r.changeCurrentRead=r.changeCurrentRead.bind(Object(T.a)(r)),r.changeAmountDue=r.changeAmountDue.bind(Object(T.a)(r)),r.calculate=r.calculate.bind(Object(T.a)(r)),r.onSubmit=r.onSubmit.bind(Object(T.a)(r)),r.changeBillId=r.changeBillId.bind(Object(T.a)(r)),r.changeFromDate=r.changeFromDate.bind(Object(T.a)(r)),r.changeTodate=r.changeTodate.bind(Object(T.a)(r)),r.changeUnitCharge=r.changeUnitCharge.bind(Object(T.a)(r)),r}return Object(c.a)(a,[{key:"submit_submeterbill",value:function(e){D.a.post("/submeter_bill",{sub:this.props.sub,submeter_bill_info:e}).then((function(e){}))}},{key:"changeBillId",value:function(e){this.setState({bill_id:e})}},{key:"changeUnitCharge",value:function(e){this.setState({unit_charge:Number(e)})}},{key:"changeFromDate",value:function(e){this.setState({from_date:e})}},{key:"changeTodate",value:function(e){this.setState({to_date:e})}},{key:"handleClickOpen",value:function(){this.setState({open:!0})}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"changePriorRead",value:function(e){this.setState({prior_read:Number(e.target.value)})}},{key:"changeCurrentRead",value:function(e){this.setState({current_read:Number(e.target.value)})}},{key:"changeAmountDue",value:function(e){this.setState({amt_due:e.target.value})}},{key:"calculate",value:function(){console.log("unit charge: ",this.state.unit_charge);var e=this.state.current_read-this.state.prior_read;console.log("kwh usage: ",e);var t=e*Number(this.state.multiplier);console.log("kwh usage with multiplier: ",t),console.log("multiplier: ",this.state.multiplier);this.state.bill_id,this.state.submeter_id,this.state.prior_read,this.state.current_read,this.state.from_date,this.state.to_date;var a=t*Number(this.state.unit_charge);this.setState({amt_due:a})}},{key:"onSubmit",value:function(e){e.preventDefault(),this.setState({open:!1}),console.log("unit charge: ",this.state.unit_charge);var t=this.state.current_read-this.state.prior_read;console.log("kwh usage: ",t);var a=t*Number(this.state.multiplier);console.log("kwh usage with multiplier: ",a),console.log("multiplier: ",this.state.multiplier);var r={bill_id:this.state.bill_id,submeter_id:this.state.submeter_id,prior_read:this.state.prior_read,cur_read:this.state.current_read,from_date:this.state.from_date,to_date:this.state.to_date,s_kwh_usage:t,amt_with_multiplier:a,amt_due:a*Number(this.state.unit_charge)};this.submit_submeterbill(r),console.log(r)}},{key:"render",value:function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(j.a,{onClick:this.handleClickOpen,color:"primary",children:"Create Submeter Bill"}),Object(m.jsxs)(w.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",children:[Object(m.jsx)(je.a,{id:"form-dialog-title",children:"Input submeter bill manually"}),Object(m.jsxs)(p.a,{children:[Object(m.jsx)(k.a,{}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"submeter",label:"Submeter",type:"text",value:this.props.submeter_id,fullWidth:!0}),Object(m.jsx)(p.a,{}),console.log("submeter bill: meter id",this.state.meter_id),Object(m.jsx)(ve,{meter_id:this.state.meter_id,changeBillId:this.changeBillId.bind(this),changeFromDate:this.changeFromDate.bind(this),changeTodate:this.changeTodate.bind(this),changeUnitCharge:this.changeUnitCharge.bind(this),onlyOption:!0}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"prior_read",label:"Prior read",type:"number",onChange:this.changePriorRead,fullWidth:!0}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"current_read",label:"Current read",type:"number",onChange:this.changeCurrentRead,fullWidth:!0}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"amt_due",label:"Amount due",type:"number",onChange:this.changeAmountDue,value:this.state.amt_due,fullWidth:!0}),Object(m.jsx)(j.a,{color:"primary",onClick:this.calculate,children:"Calculate"})]}),Object(m.jsxs)(ue.a,{children:[Object(m.jsx)(j.a,{onClick:this.handleClose,color:"primary",children:"Cancel"}),Object(m.jsx)(j.a,{onClick:this.onSubmit,color:"primary",children:"Upload"})]})]})]})}}]),a}(s.a.Component),Ce=a(700),ke=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={open:!1,tenant_id:r.props.tenant_id,submeter_list:[],submeter:"",multiplier_list:[],multiplier:"",meter_id:r.props.meter_id,meter_list:[],meter:"",submeter_error:!1,error_message:""},r.handleClickOpen=r.handleClickOpen.bind(Object(T.a)(r)),r.handleClose=r.handleClose.bind(Object(T.a)(r)),r.getSubmeterList=r.getSubmeterList.bind(Object(T.a)(r)),r.changeSubmeter=r.changeSubmeter.bind(Object(T.a)(r)),r.changeMultiplier=r.changeMultiplier.bind(Object(T.a)(r)),r.addSubmeter=r.addSubmeter.bind(Object(T.a)(r)),r.onAdd=r.onAdd.bind(Object(T.a)(r)),r.onSubmit=r.onSubmit.bind(Object(T.a)(r)),r.generateTableData=r.generateTableData.bind(Object(T.a)(r)),r.getAssociatedMeter=r.getAssociatedMeter.bind(Object(T.a)(r)),r.validate=r.validate.bind(Object(T.a)(r)),r}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(){this.props.tenant_id!==this.state.tenant_id&&this.setState({tenant_id:this.props.tenant_id,submeter_list:[],submeter:"",multiplier_list:[],multiplier:"",meter_id:this.props.meter_id,meter_list:[],meter:"",submeter_error:!1,error_message:"",meter_error:!1,helper_text:""})}},{key:"handleClickOpen",value:function(){this.setState({open:!0}),this.generateTableData()}},{key:"handleClose",value:function(){this.setState({open:!1,submeter:"",submeter_error:!1,error_message:"",meter_error:!1,helper_text:"",meter_id:""})}},{key:"getSubmeterList",value:function(){var e=this;return new Promise((function(t,a){D.a.get("/submeter/".concat(e.state.tenant_id,"/").concat(e.props.sub)).then((function(a){e.setState({submeter_list:a.data}),t()}))}))}},{key:"changeSubmeter",value:function(e){this.setState({submeter:e.target.value,submeter_error:!1,error_message:""})}},{key:"changeMultiplier",value:function(e){this.setState({multiplier:e.target.value})}},{key:"addSubmeter",value:function(){var e=this;D.a.post("/add_submeter",{submeter_id:this.state.submeter,tenant_id:this.state.tenant_id,meter_id:this.state.meter_id,multiplier:this.state.multiplier}).then((function(t){e.generateTableData()})),this.setState({submeter_error:!1,error_message:"",meter_error:!1,helper_text:""})}},{key:"onAdd",value:function(e){this.setState({meter_error:!1,helper_text:""}),console.log(this.state.meter_id),e.preventDefault(),this.validate()&&(this.addSubmeter(),this.setState({submeter_error:!1,error_message:"",meter_error:!1,helper_text:""}))}},{key:"onSubmit",value:function(e){e.preventDefault(),this.setState({open:!1})}},{key:"validate",value:function(){var e=this,t=!0,a="";return""===this.state.submeter&&(a="Please enter valid submeter number",this.setState({error_message:a,submeter_error:!0}),t=!1),this.getSubmeterList().then((function(){for(var r=0;r<e.state.submeter_list.length;r++)if(e.state.submeter===e.state.submeter_list[r].submeter_id){a="Submeter already exists",e.setState({error_message:a,submeter_error:!0}),t=!1;break}})),this.state.meter_id||(this.setState({meter_error:!0,helper_text:"Please select associated meter number"}),t=!1),t}},{key:"getAssociatedMeter",value:function(e){this.setState({meter_id:e})}},{key:"generateTableData",value:function(){var e=this;this.getSubmeterList().then((function(){e.res=[];for(var t=e.state.submeter_list,a=0;a<t.length;a++)e.res.push(Object(m.jsxs)(Y.a,{id:a,children:[Object(m.jsx)(q.a,{children:t[a].submeter_id}),Object(m.jsx)(q.a,{children:t[a].multiplier}),Object(m.jsx)(q.a,{children:t[a].meter_id}),Object(m.jsx)(q.a,{children:Object(m.jsx)(fe,{sub:e.props.sub,tenant_id:t[a].tenant_id,submeter_id:t[a].submeter_id,generateTableData:e.generateTableData})}),Object(m.jsx)(q.a,{children:Object(m.jsx)(ye,{sub:e.props.sub,meter_id:t[a].meter_id,submeter_id:t[a].submeter_id,multiplier:t[a].multiplier})})]},a));e.forceUpdate()}))}},{key:"render",value:function(){var e=this.state.submeter_error,t=this.state.error_message,a=this.state.meter_error,r=this.state.helper_text;return Object(m.jsxs)("div",{children:[Object(m.jsx)(j.a,{color:"primary",onClick:this.handleClickOpen,children:"Submeters"}),Object(m.jsxs)(w.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",children:[Object(m.jsx)(je.a,{id:"form-dialog-title",children:"Manage Submeters"}),Object(m.jsx)(Ce.a,{component:u.a,children:Object(m.jsxs)(H.a,{children:[Object(m.jsx)(V.a,{children:Object(m.jsxs)(Y.a,{children:[Object(m.jsx)(q.a,{children:"Submeters"}),Object(m.jsx)(q.a,{children:"Multiplier"}),Object(m.jsx)(q.a,{children:"Associated Meter"}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{})]})}),Object(m.jsx)(z.a,{children:this.res})]})}),Object(m.jsxs)(p.a,{children:[Object(m.jsx)(k.a,{}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"submeter",label:"Enter new submeter",type:"text",onChange:this.changeSubmeter,helperText:e?t:null,error:this.state.submeter_error,fullWidth:!0}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"multiplier",label:"Enter associated multiplier if has one",type:"text",onChange:this.changeMultiplier,fullWidth:!0}),Object(m.jsx)(p.a,{}),Object(m.jsxs)(I.a,{error:a,children:[Object(m.jsx)(be,{const:!0,methodfromparent:this.getAssociatedMeter,property_id:this.props.property_id,onlyOption:!0}),Object(m.jsx)(me.a,{children:r})]}),Object(m.jsx)(k.a,{}),Object(m.jsx)(j.a,{onClick:this.onAdd,color:"primary",children:"Add"})]}),Object(m.jsx)(ue.a,{children:Object(m.jsx)(j.a,{onClick:this.handleClose,color:"primary",children:"Cancel"})})]})]})}}]),a}(r.Component),Se=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={open:!1},r.handleClickOpen=r.handleClickOpen.bind(Object(T.a)(r)),r.handleClose=r.handleClose.bind(Object(T.a)(r)),r.onSubmit=r.onSubmit.bind(Object(T.a)(r)),r}return Object(c.a)(a,[{key:"deleteMeter",value:function(){var e=this;D.a.delete("/meter",{data:{sub:this.props.sub,meter_id:this.props.meter_id,property_id:this.props.property_id}}).then((function(t){e.props.generateMeter()}))}},{key:"handleClickOpen",value:function(){this.setState({open:!0})}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"onSubmit",value:function(){this.setState({open:!1}),this.deleteMeter()}},{key:"render",value:function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(j.a,{color:"secondary",onClick:this.handleClickOpen,children:"Delete"}),Object(m.jsxs)(w.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(m.jsx)(je.a,{id:"alert-dialog-title",children:"Delete Meter"}),Object(m.jsx)(p.a,{children:Object(m.jsx)(k.a,{id:"alert-dialog-description",children:"Are you sure you want to delete this meter?"})}),Object(m.jsxs)(ue.a,{children:[Object(m.jsx)(j.a,{onClick:this.handleClose,color:"primary",children:"Back"}),Object(m.jsx)(j.a,{onClick:this.onSubmit,color:"secondary",autoFocus:!0,children:"Delete"})]})]})]})}}]),a}(s.a.Component),we=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={from_date:"",to_date:""},r.handleFromDateChange=r.handleFromDateChange.bind(Object(T.a)(r)),r.handleToDateChange=r.handleToDateChange.bind(Object(T.a)(r)),r}return Object(c.a)(a,[{key:"handleFromDateChange",value:function(e){this.setState({from_date:e.target.value},(function(){this.props.from_date(this.state.from_date)}))}},{key:"handleToDateChange",value:function(e){this.setState({to_date:e.target.value},(function(){this.props.to_date(this.state.to_date)})),console.log(e.target.value)}},{key:"render",value:function(){return Object(m.jsx)("form",{noValidate:!0,children:Object(m.jsx)("table",{children:Object(m.jsx)("tbody",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)(S.a,{id:"from_date",label:"From",type:"date",defaultValue:this.state.from_date,InputLabelProps:{shrink:!0},onChange:this.handleFromDateChange})}),Object(m.jsx)("td",{}),Object(m.jsx)("td",{}),Object(m.jsx)("td",{}),Object(m.jsx)("td",{}),Object(m.jsx)("td",{}),Object(m.jsx)("td",{children:Object(m.jsx)(S.a,{id:"to_date",label:"To",type:"date",defaultValue:this.state.to_date,InputLabelProps:{shrink:!0},onChange:this.handleToDateChange})})]})})})})}}]),a}(s.a.Component),Pe=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={open:!1,checked:!1,setCheck:!1,meter_id:r.props.meter_id,begin:"",end:"",m_kwh_usage:0,m_charge:0,s_kwh_usage:0,s_charge:0},r.handleClickOpen=r.handleClickOpen.bind(Object(T.a)(r)),r.handleClose=r.handleClose.bind(Object(T.a)(r)),r.changeMeter=r.changeMeter.bind(Object(T.a)(r)),r.changeBegin=r.changeBegin.bind(Object(T.a)(r)),r.changeEnd=r.changeEnd.bind(Object(T.a)(r)),r.changeKWH=r.changeKWH.bind(Object(T.a)(r)),r.onSubmit=r.onSubmit.bind(Object(T.a)(r)),r.changeBill=r.changeBill.bind(Object(T.a)(r)),r.change_sec_KWH=r.change_sec_KWH.bind(Object(T.a)(r)),r.change_sec_bill_amount=r.change_sec_bill_amount.bind(Object(T.a)(r)),r.changeCheckBox=r.changeCheckBox.bind(Object(T.a)(r)),r}return Object(c.a)(a,[{key:"handleClickOpen",value:function(){this.setState({open:!0})}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"changeBill",value:function(e){this.setState({m_charge:Number(e.target.value)})}},{key:"changeMeter",value:function(e){this.setState({meter_id:e.target.value})}},{key:"changeBegin",value:function(e){this.setState({begin:e}),console.log(this.begin)}},{key:"changeEnd",value:function(e){this.setState({end:e})}},{key:"changeKWH",value:function(e){this.setState({m_kwh_usage:Number(e.target.value)})}},{key:"change_sec_KWH",value:function(e){this.setState({s_kwh_usage:Number(e.target.value)})}},{key:"change_sec_bill_amount",value:function(e){this.setState({s_charge:Number(e.target.value)})}},{key:"changeCheckBox",value:function(e){this.setState({setCheck:e.target.checked})}},{key:"submitBill",value:function(e){D.a.post("/bill",{sub:this.props.sub,bill_info:e}).then((function(e){}))}},{key:"onSubmit",value:function(e){e.preventDefault(),this.setState({open:!1});var t=this.state.m_kwh_usage+this.state.s_kwh_usage,a=this.state.m_charge+this.state.s_charge,r=a/t,s={account_id:"60c5c41d-b8b2-40d5-925b-0f482f112f13",meter_id:this.state.meter_id,from_date:this.state.begin,to_date:this.state.end,m_kwh_usage:this.state.m_kwh_usage,m_charge:this.state.m_charge,s_kwh_usage:this.state.s_kwh_usage,s_charge:this.state.s_charge,total_kwh_usage:t,total_charge:a,unit_charge:r};this.submitBill(s),console.log(s)}},{key:"render",value:function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(j.a,{onClick:this.handleClickOpen,color:"primary",children:"Manually Input The Bill"}),Object(m.jsxs)(w.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",children:[Object(m.jsx)(je.a,{id:"form-dialog-title",children:"Enter Billing Info"}),Object(m.jsxs)(p.a,{children:[Object(m.jsx)(k.a,{}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"meter_code",label:"meter# "+this.state.meter_id,type:"text",disabled:!0,fullWidth:!0}),Object(m.jsx)(we,{from_date:this.changeBegin.bind(this),to_date:this.changeEnd.bind(this)}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"kwh_rate",label:"KWH",type:"number",onChange:this.changeKWH,fullWidth:!0}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"m_charge",label:"bill $",type:"number",onChange:this.changeBill,fullWidth:!0}),Object(m.jsx)(le.a,{control:Object(m.jsx)(oe.a,{checked:this.state.setCheck,onChange:this.changeCheckBox,inputProps:{"aria-label":"primary checkbox"}}),label:"Add third party energy supply billing information"}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"kwh_rate",label:"KWH",type:"number",disabled:!this.state.setCheck,onChange:this.change_sec_KWH,fullWidth:!0}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"2nd_bill_amount",label:"2nd_bill $",type:"number",disabled:!this.state.setCheck,onChange:this.change_sec_bill_amount,fullWidth:!0})]}),Object(m.jsxs)(ue.a,{children:[Object(m.jsx)(j.a,{onClick:this.handleClose,color:"secondary",children:"Cancel"}),Object(m.jsx)(j.a,{onClick:this.onSubmit,color:"primary",children:"Upload"})]})]})]})}}]),a}(s.a.Component),Te=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={open:!1,meter_list:[],meter_to_add:"",meter_errors:!1,error_message:""},r.handleClickOpen=r.handleClickOpen.bind(Object(T.a)(r)),r.handleClose=r.handleClose.bind(Object(T.a)(r)),r.getMeterList=r.getMeterList.bind(Object(T.a)(r)),r.changeMeterToAdd=r.changeMeterToAdd.bind(Object(T.a)(r)),r.generateMeter=r.generateMeter.bind(Object(T.a)(r)),r.validate=r.validate.bind(Object(T.a)(r)),r.addMeter=r.addMeter.bind(Object(T.a)(r)),r}return Object(c.a)(a,[{key:"handleClickOpen",value:function(){this.setState({open:!0}),this.generateMeter()}},{key:"handleClose",value:function(){this.setState({open:!1,meter_to_add:"",meter_errors:!1,error_message:""})}},{key:"getMeterList",value:function(){var e=this;return new Promise((function(t,a){D.a.get("/meter/".concat(e.props.property_id,"/").concat(e.props.sub)).then((function(a){e.setState({meter_list:a.data}),t()}))}))}},{key:"changeMeterToAdd",value:function(e){this.setState({meter_to_add:parseInt(e.target.value),meter_errors:!1,error_message:""})}},{key:"generateMeter",value:function(){var e=this;this.getMeterList().then((function(){e.res=[];for(var t=0;t<e.state.meter_list.length;t++)e.res.push(Object(m.jsxs)(Y.a,{id:t,children:[Object(m.jsx)(q.a,{children:e.state.meter_list[t].meter_id},e.state.meter_list[t].meter_id),Object(m.jsx)(q.a,{children:Object(m.jsx)(Se,{sub:e.props.sub,meter_id:e.state.meter_list[t].meter_id,property_id:e.props.property_id,generateMeter:e.generateMeter})}),Object(m.jsx)(q.a,{children:Object(m.jsx)(Pe,{sub:e.props.sub,meter_id:e.state.meter_list[t].meter_id})})]},t));e.forceUpdate()}))}},{key:"validate",value:function(){var e=this,t=!0,a="";return(""===this.state.meter_to_add||!this.state.meter_to_add||this.state.meter_to_add<0)&&(a="Please enter valid meter number",this.setState({error_message:a,meter_errors:!0}),t=!1),this.getMeterList().then((function(){for(var r=0;r<e.state.meter_list.length;r++)if(e.state.meter_to_add===parseInt(e.state.meter_list[r].meter_id)){a="Meter already exists",e.setState({error_message:a,meter_errors:!0}),t=!1;break}})),t}},{key:"addMeter",value:function(){var e=this;this.validate()&&(D.a.post("/meter",{sub:this.props.sub,property_id:this.props.property_id,meter_id:this.state.meter_to_add}).then((function(t){e.generateMeter()})),this.setState({meter_errors:!1,error_message:""}))}},{key:"render",value:function(){var e=this.state.meter_errors,t=this.state.error_message;return Object(m.jsxs)("div",{children:[Object(m.jsx)(j.a,{color:"primary",onClick:this.handleClickOpen,children:"Manage Meters"}),Object(m.jsxs)(w.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",children:[Object(m.jsx)(je.a,{id:"form-dialog-title",children:"Manage Meters"}),Object(m.jsx)(Ce.a,{component:u.a,children:Object(m.jsxs)(H.a,{children:[Object(m.jsx)(V.a,{children:Object(m.jsxs)(Y.a,{children:[Object(m.jsx)(q.a,{children:"Meters"}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{})]})}),Object(m.jsx)(z.a,{children:this.res})]})}),Object(m.jsxs)(p.a,{children:[Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"meter",label:"Meter",type:"text",onChange:this.changeMeterToAdd,helperText:e?t:null,error:this.state.meter_errors,fullWidth:!0}),Object(m.jsx)(j.a,{onClick:this.addMeter,color:"primary",children:"Add"})]}),Object(m.jsx)(ue.a,{children:Object(m.jsx)(j.a,{onClick:this.handleClose,color:"primary",children:"Back"})})]})]})}}]),a}(s.a.Component),Me=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={open:!1,meter_list:[],meter_to_add:"",meter_errors:!1,error_message:"",property_id:r.props.property_id,sub:r.props.sub},r.handleClickOpen=r.handleClickOpen.bind(Object(T.a)(r)),r.handleClose=r.handleClose.bind(Object(T.a)(r)),r.getMeterList=r.getMeterList.bind(Object(T.a)(r)),r.changeMeterToAdd=r.changeMeterToAdd.bind(Object(T.a)(r)),r.generateMeter=r.generateMeter.bind(Object(T.a)(r)),r.validate=r.validate.bind(Object(T.a)(r)),r.addMeter=r.addMeter.bind(Object(T.a)(r)),r.generateMeter(),r}return Object(c.a)(a,[{key:"handleClickOpen",value:function(){this.setState({open:!0}),this.generateMeter()}},{key:"handleClose",value:function(){this.setState({open:!1,meter_to_add:"",meter_errors:!1,error_message:""})}},{key:"getMeterList",value:function(){var e=this;return new Promise((function(t,a){D.a.get("/meter/".concat(e.props.property_id,"/").concat(e.props.sub)).then((function(a){e.setState({meter_list:a.data}),t()}))}))}},{key:"changeMeterToAdd",value:function(e){this.setState({meter_to_add:parseInt(e.target.value),meter_errors:!1,error_message:""})}},{key:"generateMeter",value:function(){var e=this;this.getMeterList().then((function(){e.res=[];for(var t=0;t<e.state.meter_list.length;t++)e.res.push(Object(m.jsxs)(Y.a,{id:t,children:[Object(m.jsx)(q.a,{children:e.state.meter_list[t].meter_id},e.state.meter_list[t].meter_id),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{children:Object(m.jsx)(Se,{sub:e.props.sub,meter_id:e.state.meter_list[t].meter_id,property_id:e.props.property_id,generateMeter:e.generateMeter})}),Object(m.jsx)(q.a,{children:Object(m.jsx)(Pe,{sub:e.props.sub,meter_id:e.state.meter_list[t].meter_id})})]},t));e.forceUpdate()}))}},{key:"validate",value:function(){var e=this,t=!0,a="";return(""===this.state.meter_to_add||!this.state.meter_to_add||this.state.meter_to_add<0)&&(a="Please enter valid meter number",this.setState({error_message:a,meter_errors:!0}),t=!1),this.getMeterList().then((function(){for(var r=0;r<e.state.meter_list.length;r++)if(e.state.meter_to_add===parseInt(e.state.meter_list[r].meter_id)){a="Meter already exists",e.setState({error_message:a,meter_errors:!0}),t=!1;break}})),t}},{key:"addMeter",value:function(){var e=this;this.validate()&&(D.a.post("/meter",{sub:this.props.sub,property_id:this.props.property_id,meter_id:this.state.meter_to_add}).then((function(t){e.generateMeter()})),this.setState({meter_errors:!1,error_message:""}))}},{key:"render",value:function(){return Object(m.jsx)("div",{children:Object(m.jsxs)(Ce.a,{style:{maxHeight:300},component:u.a,children:[Object(m.jsx)(h.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:"Meter List"}),Object(m.jsxs)(H.a,{stickyHeader:!0,children:[Object(m.jsx)(V.a,{children:Object(m.jsxs)(Y.a,{children:[Object(m.jsx)(q.a,{children:"Meters"}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{})]})}),Object(m.jsx)(z.a,{children:this.res})]})]})})}}]),a}(s.a.Component),De=a(701),Ee=a(647),Ie=a(108),Fe=a.n(Ie),Ne=a(107),Le=a.n(Ne),Ae=a(704),Be=(s.a.Component,Object(re.a)({root:{"& > *":{borderBottom:"unset"}}}));function Ue(e){e.row;var t=s.a.useState(!1),a=Object(ae.a)(t,2),r=a[0],n=a[1],i=Be(),o=e.res;return Object(m.jsxs)(s.a.Fragment,{children:[Object(m.jsx)(Y.a,{className:i.root,children:Object(m.jsx)(q.a,{children:Object(m.jsx)(Ee.a,{"aria-label":"expand row",size:"big",onClick:function(){return n(!r)},children:r?Object(m.jsx)(Le.a,{}):Object(m.jsx)(Fe.a,{})})})}),Object(m.jsx)(Y.a,{children:Object(m.jsx)(q.a,{style:{paddingBottom:0,paddingTop:0},colSpan:6,children:Object(m.jsx)(De.a,{in:r,timeout:"auto",unmountOnExit:!0,children:Object(m.jsx)(Ae.a,{margin:1,children:Object(m.jsxs)(H.a,{size:"small","aria-label":"submeter",children:[Object(m.jsx)(V.a,{children:Object(m.jsx)(Y.a,{children:Object(m.jsx)(q.a,{children:"Submeter"})})}),Object(m.jsx)(z.a,{children:o})]})})})})})]})}var We=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={name:r.props.name,tenant_id:r.props.tenant_id,email:r.props.email,address:r.props.address,phone_number:r.props.phone_number,multiplier_list:[],multiplier:"",property_id:r.props.property_id,meter_id:r.props.meter_id,meter_list:[],meter:""},r.getMeterList=r.getMeterList.bind(Object(T.a)(r)),r.generateTable(),r}return Object(c.a)(a,[{key:"getMeterList",value:function(){var e=this;return new Promise((function(t,a){D.a.get("/ass_meter/".concat(e.state.property_id)).then((function(a){for(var r=[],s=0;s<a.data.length;s++)a.data[s].tenant_id==e.state.tenant_id&&r.push(a.data[s].meter_id);e.setState({meter_list:r}),t()}))}))}},{key:"generateTable",value:function(){var e=this,t=[];this.getMeterList().then((function(){for(var a=e.state.meter_list,r=0;r<a.length;r++)t.push(Object(m.jsx)(Y.a,{id:r,children:Object(m.jsx)(q.a,{children:a[r]})},r));e.res=t,e.forceUpdate()}))}},{key:"render",value:function(){return Object(m.jsx)("div",{children:Object(m.jsx)(He,{res:this.res})})}}]),a}(s.a.Component),Re=Object(re.a)({root:{"& > *":{borderBottom:"unset"}}});function He(e){e.row;var t=s.a.useState(!1),a=Object(ae.a)(t,2),r=a[0],n=a[1],i=Re(),o=e.res;return Object(m.jsxs)(s.a.Fragment,{children:[Object(m.jsx)(Y.a,{className:i.root,children:Object(m.jsx)(q.a,{children:Object(m.jsx)(Ee.a,{"aria-label":"expand row",size:"big",onClick:function(){return n(!r)},children:r?Object(m.jsx)(Le.a,{}):Object(m.jsx)(Fe.a,{})})})}),Object(m.jsx)(Y.a,{children:Object(m.jsx)(q.a,{style:{paddingBottom:0,paddingTop:0},colSpan:6,children:Object(m.jsx)(De.a,{in:r,timeout:"auto",unmountOnExit:!0,children:Object(m.jsx)(Ae.a,{margin:1,children:Object(m.jsxs)(H.a,{size:"small","aria-label":"meter",children:[Object(m.jsx)(V.a,{children:Object(m.jsx)(Y.a,{children:Object(m.jsx)(q.a,{children:"Meter"})})}),Object(m.jsx)(z.a,{children:o})]})})})})})]})}var ze=We,qe=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={tenant_list:[],meter_list:[],is_meter_tenant:!1,is_submeter_tenant:!1},r.generateTableData=r.generateTableData.bind(Object(T.a)(r)),r.getTenantList=r.getTenantList.bind(Object(T.a)(r)),r.getSubmeterList=r.getSubmeterList.bind(Object(T.a)(r)),r.generateTableData(),r}return Object(c.a)(a,[{key:"getTenantList",value:function(){var e=this;return new Promise((function(t,a){D.a.get("/tenant/".concat(e.props.property_id,"/").concat(e.props.sub)).then((function(a){e.setState({tenant_list:a.data}),t()}))}))}},{key:"getSubmeterList",value:function(){var e=this;return new Promise((function(t,a){D.a.get("/submeter/".concat(e.state.tenant_id,"/").concat(e.props.sub)).then((function(a){e.setState({submeter_list:a.data}),t()}))}))}},{key:"validate_tenant",value:function(){return!0}},{key:"generateTableData",value:function(){var e=this;this.getTenantList().then((function(){e.res=[];for(var t=0;t<e.state.tenant_list.length;t++)0===e.state.tenant_list[t].rubs?e.setState({is_meter_tenant:!1,is_submeter_tenant:!0}):e.setState({is_meter_tenant:!0,is_submeter_tenant:!1}),console.log(e.state.tenant_list[t]),e.res.push(Object(m.jsxs)(Y.a,{id:t,children:[Object(m.jsx)(q.a,{children:e.state.tenant_list[t].name}),Object(m.jsx)(q.a,{children:e.state.tenant_list[t].email}),Object(m.jsx)(q.a,{children:e.state.tenant_list[t].address}),Object(m.jsx)(q.a,{children:e.state.tenant_list[t].landlord_phone}),Object(m.jsx)(q.a,{children:(100*e.state.tenant_list[t].rubs).toFixed(2)+"%"}),Object(m.jsx)(q.a,{children:Object(m.jsx)(Oe,{sub:e.props.sub,tenant_id:e.state.tenant_list[t].tenant_id,name:e.state.tenant_list[t].name,email:e.state.tenant_list[t].email,address:e.state.tenant_list[t].address,landlord_phone:e.state.tenant_list[t].landlord_phone,rubs:e.state.tenant_list[t].rubs,property_id:e.props.property_id,generateTableData:e.generateTableData,total_footage:sessionStorage.getItem("total_footage"),is_meter_tenant:e.state.is_meter_tenant,is_submeter_tenant:e.state.is_submeter_tenant})}),Object(m.jsx)(q.a,{children:Object(m.jsx)(xe,{sub:e.props.sub,tenant_id:e.state.tenant_list[t].tenant_id,property_id:e.props.property_id,generateTableData:e.generateTableData})}),Object(m.jsx)(s.a.Fragment,{children:e.state.is_submeter_tenant?Object(m.jsxs)(s.a.Fragment,{children:[Object(m.jsx)(q.a,{children:Object(m.jsx)(ke,{sub:e.props.sub,tenant_id:e.state.tenant_list[t].tenant_id,info:e,property_id:e.props.property_id})}),Object(m.jsx)(q.a,{})]}):Object(m.jsxs)(s.a.Fragment,{children:[Object(m.jsx)(q.a,{children:"Associated Meters : "}),Object(m.jsx)(q.a,{children:Object(m.jsx)(ze,{tenant_id:e.state.tenant_list[t].tenant_id,property_id:e.props.property_id,info:e})})]})})]},t));e.forceUpdate()}))}},{key:"render",value:function(){return console.log("property id is "+this.props.property_id),Object(m.jsxs)("div",{className:"main",children:[Object(m.jsxs)(V.a,{children:[Object(m.jsx)(q.a,{component:u.a,children:Object(m.jsx)(ge,{className:"display_item",sub:this.props.sub,property_id:this.props.property_id,total_footage:sessionStorage.getItem("total_footage"),generateTableData:this.generateTableData})}),Object(m.jsx)(q.a,{component:u.a,children:Object(m.jsx)(Te,{className:"display_item",sub:this.props.sub,property_id:this.props.property_id})})]}),Object(m.jsx)(p.a,{}),Object(m.jsx)(Me,{className:"display_item",sub:this.props.sub,property_id:this.props.property_id}),Object(m.jsx)(p.a,{}),Object(m.jsx)(p.a,{}),Object(m.jsx)(u.a,{children:Object(m.jsxs)(Ce.a,{style:{maxHeight:700},component:u.a,children:[Object(m.jsx)(h.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:"Tenant Information"}),Object(m.jsxs)(H.a,{stickyHeader:!0,children:[Object(m.jsx)(V.a,{children:Object(m.jsxs)(Y.a,{children:[Object(m.jsx)(q.a,{children:"Name"}),Object(m.jsx)(q.a,{children:"Email"}),Object(m.jsx)(q.a,{children:"Address"}),Object(m.jsx)(q.a,{children:"Landlord Phone"}),Object(m.jsx)(q.a,{children:"RUBS"}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{})]})}),Object(m.jsx)(z.a,{children:this.res})]})]})})]})}}]),a}(r.Component),Ve=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={open:!1,name:"",address:"",total_footage:"",landlord_phone:"",nameError:"",addressError:"",footageError:"",phoneError:"",name_errors:!1,address_errors:!1,footage_errors:!1,phone_errors:!1},r.handleClickOpen=r.handleClickOpen.bind(Object(T.a)(r)),r.handleClose=r.handleClose.bind(Object(T.a)(r)),r.changeName=r.changeName.bind(Object(T.a)(r)),r.changeAddress=r.changeAddress.bind(Object(T.a)(r)),r.onSubmit=r.onSubmit.bind(Object(T.a)(r)),r.changeTotal_footage=r.changeTotal_footage.bind(Object(T.a)(r)),r.changeLandlord_phone=r.changeLandlord_phone.bind(Object(T.a)(r)),r.validation=r.validation.bind(Object(T.a)(r)),r}return Object(c.a)(a,[{key:"addProperty",value:function(e){var t=this;D.a.post("/property",{sub:this.props.sub,property_info:e}).then((function(e){t.props.generateTableData()}))}},{key:"handleClickOpen",value:function(){this.setState({open:!0})}},{key:"handleClose",value:function(){this.setState({open:!1,name:"",address:"",total_footage:"",landlord_phone:"",nameError:"",addressError:"",footageError:"",phoneError:"",name_errors:!1,address_errors:!1,footage_errors:!1,phone_errors:!1})}},{key:"changeName",value:function(e){this.setState({name:e.target.value,nameError:"",name_errors:!1})}},{key:"changeAddress",value:function(e){this.setState({address:e.target.value,addressError:"",address_errors:!1})}},{key:"changeTotalFootage",value:function(e){this.setState({total_footage:e.target.value})}},{key:"changeTotal_footage",value:function(e){this.setState({total_footage:parseInt(e.target.value),footageError:"",footage_errors:!1}),console.log(this.state.total_footage)}},{key:"changeLandlord_phone",value:function(e){this.setState({landlord_phone:e.target.value,phoneError:"",phone_errors:!1})}},{key:"validation",value:function(){var e=!0;if(""===this.state.name){this.setState({nameError:"Please enter a valid property name",name_errors:!0}),e=!1}if(""===this.state.address){this.setState({addressError:"Please enter a valid property address",address_errors:!0}),e=!1}if(""===this.state.total_footage||this.state.total_footage<1||!this.state.total_footage){this.setState({footageError:"Please enter a valid total footage",footage_errors:!0}),e=!1}var t=new RegExp(/^[(]{0,1}[0-9]{3}[)]{0,1}[-\s\.]{0,1}[0-9]{3}[-\s\.]{0,1}[0-9]{4}$/);if(""===this.state.landlord_phone||!t.test(this.state.landlord_phone)){this.setState({phoneError:"Please enter a valid phone number",phone_errors:!0}),e=!1}return e}},{key:"onSubmit",value:function(e){if(e.preventDefault(),this.validation()){var t={name:this.state.name,address:this.state.address,property_type:"residential",total_footage:this.state.total_footage,landlord_phone:this.state.landlord_phone};this.addProperty(t),this.setState({open:!1,name:"",address:"",total_footage:"",landlord_phone:"",nameError:"",addressError:"",footageError:"",phoneError:"",name_errors:!1,address_errors:!1,footage_errors:!1,phone_errors:!1})}}},{key:"render",value:function(){var e=this.state.name_errors,t=this.state.address_errors,a=this.state.footage_errors,r=this.state.phone_errors,s=this.state.nameError,n=this.state.addressError,i=this.state.footageError,o=this.state.phoneError;return Object(m.jsxs)("div",{children:[Object(m.jsx)(j.a,{color:"primary",onClick:this.handleClickOpen,children:"Add Property"}),Object(m.jsxs)(w.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",children:[Object(m.jsx)(je.a,{id:"form-dialog-title",children:"Enter Property Info"}),Object(m.jsxs)(p.a,{children:[Object(m.jsx)(k.a,{}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"name",label:"Name",type:"text",onChange:this.changeName,helperText:e?s:null,error:this.state.name_errors,fullWidth:!0,required:!0}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"address",label:"Address",type:"text",onChange:this.changeAddress,helperText:t?n:null,error:this.state.address_errors,fullWidth:!0,required:!0}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"totalfootage",label:"Total Building Square Footage",type:"text",onChange:this.changeTotal_footage,helperText:a?i:null,error:this.state.footage_errors,fullWidth:!0,required:!0}),Object(m.jsx)(_e.a,{customInput:S.a,autoFocus:!0,margin:"dense",id:"landlord_phone",label:"Landlord Phone Number",type:"text",onChange:this.changeLandlord_phone,helperText:r?o:null,error:this.state.phone_errors,fullWidth:!0,required:!0,format:"(###) ###-####"})]}),Object(m.jsxs)(ue.a,{children:[Object(m.jsx)(j.a,{onClick:this.handleClose,color:"primary",children:"Cancel"}),Object(m.jsx)(j.a,{onClick:this.onSubmit,color:"primary",children:"Add"})]})]})]})}}]),a}(s.a.Component),Ye=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={open:!1,property_id:r.props.property_id,name:r.props.name,address:r.props.address,total_footage:r.props.total_footage,landlord_phone:r.props.landlord_phone},r.handleClickOpen=r.handleClickOpen.bind(Object(T.a)(r)),r.handleClose=r.handleClose.bind(Object(T.a)(r)),r.changeName=r.changeName.bind(Object(T.a)(r)),r.changeAddress=r.changeAddress.bind(Object(T.a)(r)),r.changeTotalFootage=r.changeTotalFootage.bind(Object(T.a)(r)),r.changeLandlordPhone=r.changeLandlordPhone.bind(Object(T.a)(r)),r.onSubmit=r.onSubmit.bind(Object(T.a)(r)),r}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(){this.props.property_id!==this.state.property_id&&(this.setState({property_id:this.props.property_id,name:this.props.name,address:this.props.address,total_footage:this.props.total_footage,landlord_phone:this.props.landlord_phone,nameError:"",addressError:"",footageError:"",phoneError:"",name_errors:!1,address_errors:!1,footage_errors:!1,phone_errors:!1}),this.validation=this.validation.bind(this))}},{key:"updatePropertyInfo",value:function(e){var t=this;D.a.patch("/property",{sub:this.props.sub,property_info:e}).then((function(e){t.props.generateTableData()}))}},{key:"handleClickOpen",value:function(){this.setState({open:!0})}},{key:"handleClose",value:function(){this.setState({open:!1,nameError:"",addressError:"",footageError:"",phoneError:"",name_errors:!1,address_errors:!1,footage_errors:!1,phone_errors:!1})}},{key:"changeName",value:function(e){this.setState({name:e.target.value,nameError:"",name_errors:!1})}},{key:"changeAddress",value:function(e){this.setState({address:e.target.value,addressError:"",address_errors:!1})}},{key:"changeTotalFootage",value:function(e){this.setState({total_footage:e.target.value,footageError:"",footage_errors:!1})}},{key:"changeLandlordPhone",value:function(e){this.setState({landlord_phone:e.target.value,phoneError:"",phone_errors:!1})}},{key:"validation",value:function(){var e=!0;if(""===this.state.name){this.setState({nameError:"Please enter a valid property name",name_errors:!0}),e=!1}if(""===this.state.address){this.setState({addressError:"Please enter a valid property address",address_errors:!0}),e=!1}if(""===this.state.total_footage||this.state.total_footage<1||!this.state.total_footage){this.setState({footageError:"Please enter a valid total footage",footage_errors:!0}),e=!1}var t=new RegExp(/^[(]{0,1}[0-9]{3}[)]{0,1}[-\s\.]{0,1}[0-9]{3}[-\s\.]{0,1}[0-9]{4}$/);if(""===this.state.landlord_phone||!t.test(this.state.landlord_phone)){this.setState({phoneError:"Please enter a valid phone number",phone_errors:!0}),e=!1}return e}},{key:"onSubmit",value:function(e){if(e.preventDefault(),this.validation()){this.setState({open:!1,nameError:"",addressError:"",footageError:"",phoneError:"",name_errors:!1,address_errors:!1,footage_errors:!1,phone_errors:!1});var t={property_id:this.state.property_id,name:this.state.name,address:this.state.address,total_footage:this.state.total_footage,landlord_phone:this.state.landlord_phone};this.updatePropertyInfo(t)}}},{key:"render",value:function(){var e=this.state.name_errors,t=this.state.address_errors,a=this.state.footage_errors,r=this.state.phone_errors,s=this.state.nameError,n=this.state.addressError,i=this.state.footageError,o=this.state.phoneError;return Object(m.jsxs)("div",{children:[Object(m.jsx)(j.a,{color:"primary",onClick:this.handleClickOpen,children:"Edit"}),Object(m.jsxs)(w.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",children:[Object(m.jsx)(je.a,{id:"form-dialog-title",children:"Edit Property Info"}),Object(m.jsxs)(p.a,{children:[Object(m.jsx)(k.a,{}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"name",label:"Property Name",type:"text",value:this.state.name,onChange:this.changeName,helperText:e?s:null,error:this.state.name_errors,fullWidth:!0}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"address",label:"Property Address",type:"text",value:this.state.address,onChange:this.changeAddress,helperText:t?n:null,error:this.state.address_errors,fullWidth:!0}),Object(m.jsx)(S.a,{autoFocus:!0,margin:"dense",id:"total_footage",label:"Total Footage",type:"text",value:this.state.total_footage,onChange:this.changeTotalFootage,helperText:a?i:null,error:this.state.footage_errors,fullWidth:!0}),Object(m.jsx)(_e.a,{customInput:S.a,autoFocus:!0,margin:"dense",id:"landlord_phone",label:"Landlord Phone Number",type:"text",value:this.state.landlord_phone,onChange:this.changeLandlordPhone,helperText:r?o:null,error:this.state.phone_errors,fullWidth:!0,format:"(###) ###-####"})]}),Object(m.jsxs)(ue.a,{children:[Object(m.jsx)(j.a,{onClick:this.handleClose,color:"secondary",children:"Cancel"}),Object(m.jsx)(j.a,{onClick:this.onSubmit,color:"primary",children:"Update"})]})]})]})}}]),a}(s.a.Component),Ke=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={open:!1},r.handleClickOpen=r.handleClickOpen.bind(Object(T.a)(r)),r.handleClose=r.handleClose.bind(Object(T.a)(r)),r.onSubmit=r.onSubmit.bind(Object(T.a)(r)),r}return Object(c.a)(a,[{key:"deleteProperty",value:function(){var e=this;D.a.delete("/property",{data:{sub:this.props.sub,property_id:this.props.property_id}}).then((function(t){e.props.generateTableData()}))}},{key:"handleClickOpen",value:function(){this.setState({open:!0})}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"onSubmit",value:function(e){this.setState({open:!1}),this.deleteProperty()}},{key:"render",value:function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(j.a,{color:"secondary",onClick:this.handleClickOpen,children:"Delete"}),Object(m.jsxs)(w.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(m.jsx)(je.a,{id:"alert-dialog-title",children:"Delete Property?"}),Object(m.jsx)(p.a,{children:Object(m.jsx)(k.a,{id:"alert-dialog-description",children:"Are you sure you want to delete the chosen property?"})}),Object(m.jsxs)(ue.a,{children:[Object(m.jsx)(j.a,{onClick:this.handleClose,color:"primary",children:"Back"}),Object(m.jsx)(j.a,{onClick:this.onSubmit,color:"secondary",autoFocus:!0,children:"Delete"})]})]})]})}}]),a}(s.a.Component),$e=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={property_list:[]},r.generateTableData=r.generateTableData.bind(Object(T.a)(r)),r.getPropertyList=r.getPropertyList.bind(Object(T.a)(r)),r.generateTableData(),r}return Object(c.a)(a,[{key:"getPropertyList",value:function(){var e=this;return new Promise((function(t,a){D.a.get("/property/".concat(e.props.sub)).then((function(a){e.setState({property_list:a.data}),t()}))}))}},{key:"generateTableData",value:function(){var e=this;this.getPropertyList().then((function(){e.res=[];for(var t=0;t<e.state.property_list.length;t++)e.res.push(Object(m.jsxs)(Y.a,{id:t,children:[Object(m.jsx)(q.a,{children:e.state.property_list[t].name}),Object(m.jsx)(q.a,{children:e.state.property_list[t].address}),Object(m.jsx)(q.a,{children:e.state.property_list[t].total_footage}),Object(m.jsx)(q.a,{children:e.state.property_list[t].landlord_phone}),Object(m.jsx)(q.a,{children:Object(m.jsx)(Ze,{sub:e.props.sub,is_admin:e.props.is_admin,property_id:e.state.property_list[t].property_id,name:e.state.property_list[t].name,total_footage:e.state.property_list[t].total_footage,landlord_phone:e.state.property_list[t].landlord_phone})}),Object(m.jsx)(q.a,{children:Object(m.jsx)(Ye,{sub:e.props.sub,property_id:e.state.property_list[t].property_id,name:e.state.property_list[t].name,address:e.state.property_list[t].address,total_footage:e.state.property_list[t].total_footage,landlord_phone:e.state.property_list[t].landlord_phone,generateTableData:e.generateTableData})}),Object(m.jsx)(q.a,{children:Object(m.jsx)(Ke,{sub:e.props.sub,property_id:e.state.property_list[t].property_id,generateTableData:e.generateTableData})})]},t));e.forceUpdate()}))}},{key:"render",value:function(){return Object(m.jsxs)("div",{className:"main",children:[Object(m.jsx)(V.a,{children:Object(m.jsx)(q.a,{component:u.a,children:Object(m.jsx)(Ve,{className:"display_item",sub:this.props.sub,generateTableData:this.generateTableData})})}),Object(m.jsx)(p.a,{}),Object(m.jsx)(Ce.a,{style:{maxHeight:700},component:u.a,children:Object(m.jsxs)(H.a,{stickyHeader:!0,children:[Object(m.jsx)(V.a,{children:Object(m.jsxs)(Y.a,{children:[Object(m.jsx)(q.a,{children:"Property Name"}),Object(m.jsx)(q.a,{children:"Property Address"}),Object(m.jsx)(q.a,{children:"Total Footage"}),Object(m.jsx)(q.a,{children:"Landlord Phone"}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{})]})}),Object(m.jsx)(z.a,{children:this.res})]})})]})}}]),a}(r.Component),Ze=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).manage_tenants=function(){sessionStorage.setItem("property_name",e.props.name),sessionStorage.setItem("property_id",e.props.property_id),sessionStorage.setItem("total_footage",e.props.total_footage),sessionStorage.setItem("landlord_phone",e.props.landlord_phone),1==e.props.is_admin?window.location="/Admin/PropMana/".concat(e.props.sub,"/property/").concat(e.props.property_id):window.location="/PropMana/".concat(e.props.sub,"/property/").concat(e.props.property_id)},e}return Object(c.a)(a,[{key:"render",value:function(){return Object(m.jsx)(j.a,{onClick:this.manage_tenants,color:"primary",children:"View Details"})}}]),a}(r.Component),Ge=$e,Je=(a(149),a(128)),Qe=a(109),Xe=(a(172),function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).generateTableData=function(){for(var e=0,t=0,a=0,s=0,n=0,i=[],o=r.props.tenant_list.length,c=0;c<o;c++)i[c]=[];r.res=i,r.print=i;for(c=0;c<o;c++){0==r.props.tenant_list[c].rubs?r.res[c].push(Object(m.jsxs)("div",{children:[Object(m.jsxs)("table",{children:[Object(m.jsxs)("tr",{class:"spaceUnder",children:[Object(m.jsx)("tr",{children:r.props.tenant_list[c].name}),Object(m.jsx)("td",{})]}),Object(m.jsxs)("tr",{class:"spaceUnder",children:[Object(m.jsx)("tr",{children:r.props.tenant_list[c].address}),Object(m.jsx)("td",{})]}),Object(m.jsx)("tr",{children:"Electrical Charges as Metered"}),Object(m.jsx)("td",{}),Object(m.jsxs)("tr",{class:"spaceUnder",children:[Object(m.jsxs)("tr",{children:["Period Start:  ",r.props.invoice_list[0].from_date.split("T")[0]]}),Object(m.jsxs)("tr",{children:["Period End: ",r.props.invoice_list[0].to_date.split("T")[0]]})]})]}),Object(m.jsxs)("table",{striped:!0,bordered:!0,hover:!0,class:"underline",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Sub-Unit"}),Object(m.jsx)("th",{children:"Prior Amount (KwH)"}),Object(m.jsx)("th",{children:"Current Amount (KwH)"}),Object(m.jsx)("th",{children:"Current Usage (KwH)"}),Object(m.jsx)("th",{children:"Unit Charge"}),Object(m.jsx)("th",{children:"Amount"})]})}),Object(m.jsx)("tbody",{})]})]})):r.res[c].push(Object(m.jsx)("div",{children:Object(m.jsxs)("table",{children:[Object(m.jsxs)("tr",{class:"spaceUnder",children:[Object(m.jsx)("tr",{children:r.props.tenant_list[c].name}),Object(m.jsx)("td",{})]}),Object(m.jsxs)("tr",{class:"spaceUnder",children:[Object(m.jsx)("tr",{children:r.props.tenant_list[c].address}),Object(m.jsx)("td",{})]}),Object(m.jsx)("tr",{children:"Electrical Charges as Metered"}),Object(m.jsx)("td",{}),Object(m.jsxs)("tr",{class:"spaceUnder",children:[Object(m.jsxs)("tr",{children:[r.props.invoice_list[0].from_date.split("T")[0]," to ",r.props.invoice_list[0].to_date.split("T")[0]]}),Object(m.jsx)("td",{})]})]})}));for(var l=0;l<r.props.invoice_list.length;l++){var d=r.props.invoice_list[l];"y"==d.has_submeter&&d.tenant_id==r.props.tenant_list[c].tenant_id?(e=d.total_charge,t++,r.res[c].push(Object(m.jsxs)("table",{striped:!0,bordered:!0,hover:!0,class:"underline",children:[Object(m.jsx)("thread",{}),Object(m.jsx)("tbody",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{class:"s",children:d.submeter_id}),Object(m.jsx)("th",{class:"s",children:d.prior_read}),Object(m.jsx)("th",{class:"s",children:d.cur_read}),Object(m.jsx)("th",{class:"s",children:d.cur_read-d.prior_read}),Object(m.jsx)("th",{class:"s",children:d.unit_charge}),Object(m.jsx)("th",{class:"s",children:"$"+d.submeter_charge})]})})]}))):"n"==d.has_submeter&&d.tenant_id==r.props.tenant_list[c].tenant_id&&(a++,s+=d.total_charge,n+=d.meter_amt_due)}0==r.props.tenant_list[c].rubs?(r.res[c].push(Object(m.jsx)("table",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{class:"amt",children:"Total Amount: "}),Object(m.jsx)("th",{class:"topline"}),Object(m.jsxs)("th",{class:"topline",children:["$ ",e]}),Object(m.jsx)("th",{class:"topline"})]})})),r.res[c].push(Object(m.jsxs)("table",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{class:"top_and_bottom_line",children:"Enclosed"}),Object(m.jsx)("td",{})]}),Object(m.jsx)("tr",{}),Object(m.jsx)("tr",{}),Object(m.jsx)("tr",{})]}))):0!=r.props.tenant_list[c].rubs&&(r.res[c].push(Object(m.jsxs)("table",{class:"place_in_center",children:[Object(m.jsxs)("tr",{class:"spaceUnder",children:[Object(m.jsx)("tr",{children:"Total Building Monthly Electrical Bill"}),Object(m.jsxs)("tr",{children:["$ ",s]}),Object(m.jsx)("td",{})]}),Object(m.jsxs)("tr",{class:"spaceUnder",children:[Object(m.jsx)("tr",{children:"Tenant Square Footage Share"}),Object(m.jsxs)("tr",{children:[100*r.props.tenant_list[c].rubs," %"]}),Object(m.jsx)("td",{})]}),Object(m.jsxs)("tr",{class:"spaceUnder",children:[Object(m.jsx)("tr",{children:"Tenant Share of Electric Bill"}),Object(m.jsxs)("tr",{children:["$ ",n]}),Object(m.jsx)("td",{})]}),Object(m.jsxs)("tr",{class:"spaceUnder",children:[Object(m.jsx)("tr",{children:"Please make check payable to Property Tech LLc"}),Object(m.jsx)("td",{})]})]})),r.res[c].push(Object(m.jsxs)("table",{children:[Object(m.jsxs)("tr",{class:"spaceUnder",children:[Object(m.jsx)("tr",{children:"Due upon recipt"}),Object(m.jsx)("td",{})]}),Object(m.jsxs)("tr",{class:"spaceUnder",children:[Object(m.jsx)("tr",{children:"Thank You,"}),Object(m.jsx)("td",{})]}),Object(m.jsxs)("tr",{class:"spaceUnder",children:[Object(m.jsx)("tr",{children:"Property Tech LLC"}),Object(m.jsx)("td",{})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{class:"meter_top_and_bottom_line",children:"Enclosed_______________________________________________________________________________________________"}),Object(m.jsx)("td",{})]})]})))}r.setState({sub_meter_size:t}),r.setState({meter_size:a})},r.generateIndividual=function(){for(var e=[],t=r.props.tenant_list.length,a=0;a<t;a++)e[a]=[];r.print=e;for(var s=0;s<t;s++){r.res[s][0];r.print[s].push(Object(m.jsx)("div",{class:"sbbb",id:"pdf"+s+r.props.tenant_list[s].tenant_id,children:r.res[s]}))}},r.printall=function(){for(var e=0;e<r.props.tenant_list.length;e++)r.printDocument(e);alert("Emails are on the way.")},r.downloadall=function(){for(var e=0;e<r.props.tenant_list.length;e++)r.downloadPDF(e);alert("Downloads will be completed very soon.")},r.state={open:!1,display:r.props.display,invoice_list:r.props.invoice_list,tenant_list:r.props.tenant_list,property_info:r.props.property_info},r.sub_meter_size=0,r.meter_size=0,r.generateTableData=r.generateTableData.bind(Object(T.a)(r)),r.generateIndividual=r.generateIndividual.bind(Object(T.a)(r)),r.printDocument=r.printDocument.bind(Object(T.a)(r)),r.printall=r.printall.bind(Object(T.a)(r)),r.downloadPDF=r.downloadPDF.bind(Object(T.a)(r)),r.downloadall=r.downloadall.bind(Object(T.a)(r)),r.handleClickOpen=r.handleClickOpen.bind(Object(T.a)(r)),r.handleClose=r.handleClose.bind(Object(T.a)(r)),r}return Object(c.a)(a,[{key:"handleClickOpen",value:function(){this.setState({open:!0,invoice_list:this.props.invoice_list,tenant_list:this.props.tenant_list,property_info:this.props.property_info}),console.log("invoice list: ",this.props.invoice_list[0]),this.generateTableData(),this.generateIndividual()}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"printDocument",value:function(e){var t=new Je.a({unit:"mm",format:[297,210]}),a=(this.props.tenant_list[e].name,this.props.tenant_list[e].email);Qe.a(document.getElementById("pdf"+e+this.props.tenant_list[e].tenant_id),{quality:1}).then((function(e){document.createElement("a").download="my-image-name.jpeg",t.addImage(e,"PNG",0,0);var r=t.output("datauristring");console.log(r);var s={receiver:a,path:r};D.a.post("/sendPDFToTenant",s).then((function(e){}))}))}},{key:"downloadPDF",value:function(e){var t=new Je.a,a=this.props.tenant_list[e].name;this.props.tenant_list[e].email;Qe.a(document.getElementById("pdf"+e+this.props.tenant_list[e].tenant_id),{quality:1}).then((function(e){document.createElement("a").download="my-image-name.jpeg",t.addImage(e,"PNG",0,0),t.save(a+".pdf")}))}},{key:"render",value:function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)("meta",{name:"viewport",content:"width=device-width"}),Object(m.jsx)(j.a,{color:"primary",onClick:this.handleClickOpen,children:"View PDF in dialog window"}),Object(m.jsxs)(w.a,{fullScreen:!0,open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",children:[Object(m.jsxs)(p.a,{children:[Object(m.jsx)(k.a,{}),Object(m.jsx)("div",{children:this.print}),Object(m.jsx)("button",{onClick:this.printall,children:"Send PDFs to each tenant"}),Object(m.jsxs)("table",{children:[Object(m.jsx)("tr",{}),Object(m.jsx)("tr",{}),Object(m.jsx)("tr",{}),Object(m.jsx)("tr",{}),Object(m.jsx)("tr",{})]}),Object(m.jsx)("button",{onClick:this.downloadall,children:"Download all invoices"})]}),Object(m.jsx)(ue.a,{children:Object(m.jsx)(j.a,{onClick:this.handleClose,color:"primary",children:"Close"})})]})]})}}]),a}(s.a.Component)),et=a(708),tt=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={from_date:"",to_date:"",bill_id:"",meter_id:"",account_id:"",m_kwh_usage:"",s_kwh_usage:"",s_charge:"",total_kwh_usage:"",total_charge:"",unit_charge:"",invoice_list:[],property_id:r.props.property_id,tenant_list:r.props.tenant_list,property_info:r.props.property_info,billing_dates:[],tenant_id:0,current_res:[],current_resm:[],button_flag:!1,helper_text:""},r.handleFromDateChange=r.handleFromDateChange.bind(Object(T.a)(r)),r.handleToDateChange=r.handleToDateChange.bind(Object(T.a)(r)),r.getMeterInvoiceList=r.getMeterInvoiceList.bind(Object(T.a)(r)),r.getInvoiceDateList=r.getInvoiceDateList.bind(Object(T.a)(r)),r.getTenantList=r.getTenantList.bind(Object(T.a)(r)),r.onSubmit=r.onSubmit.bind(Object(T.a)(r)),r.generateMeterTable=r.generateMeterTable.bind(Object(T.a)(r)),r.generateDateTable=r.generateDateTable.bind(Object(T.a)(r)),r.getCurrentInvoice=r.getCurrentInvoice.bind(Object(T.a)(r)),r.getCurrentInvoice_sub=r.getCurrentInvoice_sub.bind(Object(T.a)(r)),r.handleClose=r.handleClose.bind(Object(T.a)(r)),r.generateDateTable(),r}return Object(c.a)(a,[{key:"handleFromDateChange",value:function(e){var t=this;this.setState({from_date:e.target.value},(function(){console.log(t.state.from_date)}))}},{key:"handleToDateChange",value:function(e){var t=this;this.setState({to_date:e.target.value},(function(){console.log(t.state.to_date)}))}},{key:"getCurrentInvoice",value:function(e,t,a,r){console.log("test test:",e,t,a,r),this.setState({current_res:e,invoice_list:t,tenant_list:a,property_info:r})}},{key:"getCurrentInvoice_sub",value:function(e){console.log("test test:",e),this.setState({current_resm:e})}},{key:"getTenantList",value:function(){var e=this;return new Promise((function(t,a){D.a.get("/tenant/".concat(e.props.property_id)).then((function(a){e.setState({tenant_list:a.data}),t()}))}))}},{key:"getInvoiceDateList",value:function(){var e=this;return new Promise((function(t,a){D.a.post("/select_timePeriod_invoice/".concat(e.state.tenant_id)).then((function(a){e.setState({billing_dates:a.data},(function(){console.log("response from database: ",a.data),t()}))}))}))}},{key:"getMeterInvoiceList",value:function(){var e=this;return new Promise((function(t,a){D.a.post("/invoice_history",{property_id:e.state.property_id,from_date:e.state.from_date,to_date:e.state.to_date}).then((function(a){console.log("invoice history response:",a.data),e.setState({invoice_list:a.data.invoice_list,tenant_list:a.data.tenant_list,property_info:a.data.property_info}),e.forceUpdate(),t(),0!=a.data.invoice_list&&0!==a.data.invoice_list.length||alert("no invoice in selecting time peirod, make sure  generate invoice first using {Generate Invoice} on the side bar")}))}))}},{key:"generateDateTable",value:function(){var e=this,t=[];this.getTenantList().then((function(){var a=e.state.tenant_list;console.log(a),e.setState({tenant_id:a[0].tenant_id}),console.log(e.state.tenant_id),e.getInvoiceDateList().then((function(){var a=e.state.billing_dates;console.log("current date: ",a);for(var r=0;r<a.length;r++)t.push(Object(m.jsxs)(Y.a,{id:r,children:[Object(m.jsx)(q.a,{children:a[r].from_date.split("T")[0]}),Object(m.jsx)(q.a,{children:a[r].to_date.split("T")[0]}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{children:Object(m.jsx)(at,{property_id:e.props.property_id,from_date:a[r].from_date.split("T")[0],to_date:a[r].to_date.split("T")[0],methodfromparent:e.getCurrentInvoice,methodfromparenttwo:e.getCurrentInvoice_sub})}),Object(m.jsx)(q.a,{})]},r));e.resd=t,e.forceUpdate()}))}))}},{key:"generateMeterTable",value:function(){var e=this,t=[],a=[],r="",s=0,n=0,i=0,o=0;this.getMeterInvoiceList().then((function(){var c=e.state.invoice_list,l=e.state.tenant_list,d=e.state.property_info;if(console.log(e.state.invoice_list),console.log(l),console.log(d),c.length>0){var h="Viewing invoice of "+e.state.from_date+" to "+e.state.to_date;e.setState({button_flag:!0,helper_text:h})}for(var b=0;b<c.length;b++){for(var u=0;u<l.length;u++)c[b].tenant_id===l[u].tenant_id&&(r=l[u].name,s=l[u].rubs,n=s*d[0].total_footage,i=(i=c[b].total_charge/s).toFixed(2),"y"===c[b].has_submeter&&(o=c[b].cur_read-c[b].prior_read));0!==s?t.push(Object(m.jsxs)(Y.a,{id:b,children:[Object(m.jsx)(q.a,{children:c[b].invoice_id}),Object(m.jsx)(q.a,{children:r}),Object(m.jsx)(q.a,{children:c[b].meter_id}),Object(m.jsx)(q.a,{children:c[b].from_date.split("T")[0]}),Object(m.jsx)(q.a,{children:c[b].to_date.split("T")[0]}),Object(m.jsx)(q.a,{children:c[b].meter_amt_due}),Object(m.jsx)(q.a,{children:100*s+"%"}),Object(m.jsx)(q.a,{children:n}),Object(m.jsx)(q.a,{children:d[0].total_footage}),Object(m.jsx)(q.a,{children:i}),Object(m.jsx)(q.a,{children:c[b].total_charge})]},b)):a.push(Object(m.jsxs)(Y.a,{id:b,children:[Object(m.jsx)(q.a,{children:c[b].invoice_id}),Object(m.jsx)(q.a,{children:r}),Object(m.jsx)(q.a,{children:c[b].submeter_id}),Object(m.jsx)(q.a,{children:c[b].from_date.split("T")[0]}),Object(m.jsx)(q.a,{children:c[b].to_date.split("T")[0]}),Object(m.jsx)(q.a,{children:c[b].submeter_charge}),Object(m.jsx)(q.a,{children:c[b].prior_read}),Object(m.jsx)(q.a,{children:c[b].cur_read}),Object(m.jsx)(q.a,{children:o}),Object(m.jsx)(q.a,{children:c[b].unit_charge}),Object(m.jsx)(q.a,{children:c[b].total_charge})]},b))}e.res=t,e.resm=a,e.setState({current_res:t,current_resm:a}),e.forceUpdate()}))}},{key:"onSubmit",value:function(){""!=this.state.from_date&&""!=this.state.to_date?this.generateMeterTable():alert("please select a time period")}},{key:"handleClose",value:function(){this.setState({button_flag:!1})}},{key:"render",value:function(){return Object(m.jsxs)(s.a.Fragment,{children:[Object(m.jsx)(h.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:"Invoice Statement History"}),Object(m.jsxs)(Ce.a,{style:{maxHeight:600},children:[Object(m.jsxs)("form",{noValidate:!0,children:[Object(m.jsx)(S.a,{id:"from_date",label:"From",type:"date",defaultValue:this.state.from_date,InputLabelProps:{shrink:!0},onChange:this.handleFromDateChange}),Object(m.jsx)(S.a,{id:"to_date",label:"To",type:"date",defaultValue:this.state.to_date,InputLabelProps:{shrink:!0},onChange:this.handleToDateChange})]}),Object(m.jsx)(j.a,{onClick:this.onSubmit,color:"primary",children:"Show"}),Object(m.jsx)(et.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.button_flag,autoHideDuration:6e3,onClose:this.handleClose,message:this.state.helper_text}),Object(m.jsxs)(H.a,{stickyHeader:!0,children:[Object(m.jsx)(V.a,{children:Object(m.jsxs)(Y.a,{children:[Object(m.jsx)(q.a,{children:"Invoice Start Date"}),Object(m.jsx)(q.a,{children:"Invoice End Date"}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{})]})}),Object(m.jsx)(z.a,{children:this.resd})]})]}),Object(m.jsx)(b.a,{}),Object(m.jsx)(b.a,{}),Object(m.jsx)(b.a,{}),Object(m.jsx)(b.a,{}),Object(m.jsx)(b.a,{}),Object(m.jsx)(b.a,{}),Object(m.jsx)(b.a,{}),Object(m.jsx)(b.a,{}),Object(m.jsx)(Ce.a,{style:{maxHeight:500},children:Object(m.jsxs)(H.a,{stickyHeader:!0,children:[Object(m.jsx)(V.a,{children:Object(m.jsxs)(Y.a,{children:[Object(m.jsx)(q.a,{children:"Invoice ID"}),Object(m.jsx)(q.a,{children:"Tenant Name"}),Object(m.jsx)(q.a,{children:"Meter ID"}),Object(m.jsx)(q.a,{children:"From"}),Object(m.jsx)(q.a,{children:"To"}),Object(m.jsx)(q.a,{children:"Meter Amount Due"}),Object(m.jsx)(q.a,{children:"RUBS"}),Object(m.jsx)(q.a,{children:"User Footage"}),Object(m.jsx)(q.a,{children:"Total Footage"}),Object(m.jsx)(q.a,{children:"Total Building Amount Due"}),Object(m.jsx)(q.a,{children:"Total Tenant Amount Due"})]})}),Object(m.jsx)(z.a,{children:this.state.current_res})]})}),Object(m.jsx)(b.a,{}),Object(m.jsx)(b.a,{}),Object(m.jsx)(b.a,{}),Object(m.jsx)(b.a,{}),Object(m.jsx)(b.a,{}),Object(m.jsx)(b.a,{}),Object(m.jsx)(b.a,{}),Object(m.jsx)(b.a,{}),Object(m.jsx)(b.a,{}),Object(m.jsx)(Ce.a,{style:{maxHeight:500},children:Object(m.jsxs)(H.a,{stickyHeader:!0,children:[Object(m.jsx)(V.a,{children:Object(m.jsxs)(Y.a,{children:[Object(m.jsx)(q.a,{children:"Invoice ID"}),Object(m.jsx)(q.a,{children:"Tenant Name"}),Object(m.jsx)(q.a,{children:"Submeter ID"}),Object(m.jsx)(q.a,{children:"From"}),Object(m.jsx)(q.a,{children:"To"}),Object(m.jsx)(q.a,{children:"Submeter Charge"}),Object(m.jsx)(q.a,{children:"Prior Read"}),Object(m.jsx)(q.a,{children:"Current Read"}),Object(m.jsx)(q.a,{children:"Total KWH Usage"}),Object(m.jsx)(q.a,{children:"Unit Charge"}),Object(m.jsx)(q.a,{children:"Total Amount Due"})]})}),Object(m.jsx)(z.a,{children:this.state.current_resm})]})}),Object(m.jsx)(Xe,{property_info:this.state.property_info,tenant_list:this.state.tenant_list,invoice_list:this.state.invoice_list})]})}}]),a}(s.a.Component),at=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={property_id:r.props.property_id,from_date:r.props.from_date,to_date:r.props.to_date,current_res:[],current_resm:[],invoice_list:[],tenant_list:[],property_info:[],button_flag:!1,helper_text:""},r.getMeterInvoiceList=r.getMeterInvoiceList.bind(Object(T.a)(r)),r.onSubmit=r.onSubmit.bind(Object(T.a)(r)),r.handleClose=r.handleClose.bind(Object(T.a)(r)),r}return Object(c.a)(a,[{key:"getMeterInvoiceList",value:function(){var e=this;return new Promise((function(t,a){D.a.post("/invoice_history",{property_id:e.state.property_id,from_date:e.state.from_date,to_date:e.state.to_date}).then((function(a){console.log("invoice history response:",a.data),e.setState({invoice_list:a.data.invoice_list,tenant_list:a.data.tenant_list,property_info:a.data.property_info}),e.forceUpdate(),t(),0!=a.data.invoice_list&&0!==a.data.invoice_list.length||alert("no invoice in selecting time peirod, make sure  generate invoice first using {Generate Invoice} on the side bar")}))}))}},{key:"generateMeterTable",value:function(){var e=this,t=[],a=[],r="",s=0,n=0,i=0,o=0;this.getMeterInvoiceList().then((function(){var c=e.state.invoice_list,l=e.state.tenant_list,d=e.state.property_info;if(console.log(e.state.invoice_list),console.log(l),console.log(d),c.length>0){var h="Viewing invoice of "+e.state.from_date+" to "+e.state.to_date;e.setState({button_flag:!0,helper_text:h})}for(var b=0;b<c.length;b++){for(var u=0;u<l.length;u++)c[b].tenant_id===l[u].tenant_id&&(r=l[u].name,s=l[u].rubs,n=s*d[0].total_footage,i=(i=c[b].total_charge/s).toFixed(2),"y"===c[b].has_submeter&&(o=c[b].cur_read-c[b].prior_read));0!==s?t.push(Object(m.jsxs)(Y.a,{id:b,children:[Object(m.jsx)(q.a,{children:c[b].invoice_id}),Object(m.jsx)(q.a,{children:r}),Object(m.jsx)(q.a,{children:c[b].meter_id}),Object(m.jsx)(q.a,{children:c[b].from_date.split("T")[0]}),Object(m.jsx)(q.a,{children:c[b].to_date.split("T")[0]}),Object(m.jsx)(q.a,{children:c[b].meter_amt_due}),Object(m.jsx)(q.a,{children:100*s+"%"}),Object(m.jsx)(q.a,{children:n}),Object(m.jsx)(q.a,{children:d[0].total_footage}),Object(m.jsx)(q.a,{children:i}),Object(m.jsx)(q.a,{children:c[b].total_charge})]},b)):a.push(Object(m.jsxs)(Y.a,{id:b,children:[Object(m.jsx)(q.a,{children:c[b].invoice_id}),Object(m.jsx)(q.a,{children:r}),Object(m.jsx)(q.a,{children:c[b].submeter_id}),Object(m.jsx)(q.a,{children:c[b].from_date.split("T")[0]}),Object(m.jsx)(q.a,{children:c[b].to_date.split("T")[0]}),Object(m.jsx)(q.a,{children:c[b].submeter_charge}),Object(m.jsx)(q.a,{children:c[b].prior_read}),Object(m.jsx)(q.a,{children:c[b].cur_read}),Object(m.jsx)(q.a,{children:o}),Object(m.jsx)(q.a,{children:c[b].unit_charge}),Object(m.jsx)(q.a,{children:c[b].total_charge})]},b))}e.res=t,e.resm=a,e.setState({current_res:t,current_resm:a},(function(){e.props.methodfromparent(t,e.state.invoice_list,e.state.tenant_list,e.state.property_info),e.props.methodfromparenttwo(a)})),console.log("tryone"+e.state.current_resm),e.forceUpdate()}))}},{key:"onSubmit",value:function(){console.log(this.state.property_id,this.state.from_date,this.state.to_date,this.state.invoice_list,this.state.tenant_list),this.generateMeterTable(),this.forceUpdate()}},{key:"handleClose",value:function(){this.setState({button_flag:!1})}},{key:"render",value:function(){return Object(m.jsxs)(s.a.Fragment,{children:[Object(m.jsx)(j.a,{color:"primary",onClick:this.onSubmit,children:"Show"}),Object(m.jsx)(et.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.button_flag,autoHideDuration:6e3,onClose:this.handleClose,message:this.state.helper_text})]})}}]),a}(s.a.Component),rt=tt,st=a(702),nt=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={tenant_list:[]},r.getTenantList=r.getTenantList.bind(Object(T.a)(r)),r.getTenantList(),r}return Object(c.a)(a,[{key:"getTenantList",value:function(){var e=this;return new Promise((function(t,a){D.a.get("/tenant/".concat(e.props.property_id)).then((function(a){e.setState({tenant_list:a.data}),t()}))}))}},{key:"render",value:function(){var e=Object(re.a)((function(e){return{container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));return Object(m.jsx)("div",{className:"leftOffset",children:Object(m.jsx)(s.a.Fragment,{children:Object(m.jsx)(st.a,{maxWidth:"lg",className:e.container,children:Object(m.jsxs)(B.a,{container:!0,spacing:3,children:[Object(m.jsx)(B.a,{item:!0,xs:12,md:12,lg:12,children:Object(m.jsx)(u.a,{children:Object(m.jsx)(rt,{className:"display_item",property_id:this.props.property_id,tenant_list:this.state.tenant_list,info:this})})}),Object(m.jsx)(B.a,{item:!0,xs:12,md:12,lg:12,children:Object(m.jsx)(u.a,{})})]})})})})}}]),a}(r.Component),it=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={meter_list:r.props.meter_list,meter_id:"",property_id:r.props.property_id},r}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.generateTable()}},{key:"getMeterList",value:function(){var e=this;return new Promise((function(t,a){D.a.get("/meter/".concat(e.state.property_id)).then((function(a){e.setState({meter_list:a.data},(function(){t()}))}))}))}},{key:"generateTable",value:function(){var e=this,t=[];this.getMeterList().then((function(){for(var a=e.state.meter_list,r=0;r<a.length;r++)t.push(Object(m.jsxs)(Y.a,{id:r,children:[Object(m.jsx)(q.a,{children:e.state.meter_list[r].meter_id},e.state.meter_list[r].meter_id),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{children:Object(m.jsx)(Pe,{meter_id:e.state.meter_list[r].meter_id})})]},r));e.res=t,e.forceUpdate()}))}},{key:"render",value:function(){return Object(m.jsxs)(s.a.Fragment,{children:[Object(m.jsx)(h.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:"Meters"}),Object(m.jsx)(Ce.a,{style:{maxHeight:400},children:Object(m.jsxs)(H.a,{size:"small",stickyHeader:!0,children:[Object(m.jsx)(V.a,{children:Object(m.jsxs)(Y.a,{children:[Object(m.jsx)(q.a,{children:"Meter numbers"}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{})]})}),Object(m.jsx)(z.a,{children:this.res})]})})]})}}]),a}(s.a.Component),ot=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={meter_list:r.props.meter_list,meter_id:r.props.meter_id,property_id:r.props.property_id,tenant_id:[],tenant_list:[],submeter_list:[]},r.generateTable=r.generateTable.bind(Object(T.a)(r)),r.getSubmeterList=r.getSubmeterList.bind(Object(T.a)(r)),r.getTenantList=r.getTenantList.bind(Object(T.a)(r)),r}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.generateTable()}},{key:"getTenantList",value:function(){var e=this;return new Promise((function(t,a){D.a.get("/tenant/".concat(e.state.property_id)).then((function(a){e.setState({tenant_list:a.data}),t()})),console.log(e.state.tenant_list)}))}},{key:"getSubmeterList",value:function(){var e=this;return new Promise((function(t,a){D.a.get("/submeter/".concat(e.state.tenant_id)).then((function(a){e.setState({submeter_list:a.data}),t()}))}))}},{key:"generateTable",value:function(){var e=this,t=[];this.getTenantList().then((function(){var a=e.state.tenant_list;console.log("tenant list is: ",a);for(var r=0,s=0;s<a.length;s++)0===a[s].rubs&&(e.setState({tenant_id:a[s].tenant_id}),console.log("tenant id: ",e.state.tenant_id),e.getSubmeterList().then((function(){var a=e.state.submeter_list;console.log();for(var s=0;s<a.length;s++)t.push(Object(m.jsxs)(Y.a,{id:r,children:[Object(m.jsx)(q.a,{children:a[s].submeter_id}),Object(m.jsx)(q.a,{children:a[s].multiplier}),Object(m.jsx)(q.a,{children:a[s].meter_id}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{children:Object(m.jsx)(ye,{submeter_id:a[s].submeter_id,tenant_id:a[s].tenant_id,info:e,meter_id:a[s].meter_id,property_id:e.state.property_id,multiplier:a[s].multiplier})})]},r)),r++;console.log("ressfsafas",t.length),e.res=t,e.forceUpdate()})))}))}},{key:"render",value:function(){return Object(m.jsxs)(s.a.Fragment,{children:[Object(m.jsx)(h.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:"Submeters"}),Object(m.jsx)(Ce.a,{style:{maxHeight:400},children:Object(m.jsxs)(H.a,{size:"small",stickyHeader:!0,children:[Object(m.jsx)(V.a,{children:Object(m.jsxs)(Y.a,{children:[Object(m.jsx)(q.a,{children:"Submeter numbers"}),Object(m.jsx)(q.a,{children:"Multiplier"}),Object(m.jsx)(q.a,{children:"Associated Meter"}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{})]})}),Object(m.jsx)(z.a,{children:this.res})]})})]})}}]),a}(s.a.Component),ct=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={open:!1},r.handleClickOpen=r.handleClickOpen.bind(Object(T.a)(r)),r.handleClose=r.handleClose.bind(Object(T.a)(r)),r.onSubmit=r.onSubmit.bind(Object(T.a)(r)),r}return Object(c.a)(a,[{key:"deleteMetersBill",value:function(){var e=this;return console.log("bill -id",this.props.bill_id),new Promise((function(t,a){D.a.delete("/deletebill",{data:{bill_id:e.props.bill_id}}).then((function(e){})),alert("please click show to see updates"),t()}))}},{key:"handleClickOpen",value:function(){this.setState({open:!0})}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"onSubmit",value:function(){this.setState({open:!1}),this.deleteMetersBill()}},{key:"render",value:function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(j.a,{color:"secondary",onClick:this.handleClickOpen,children:"Delete"}),Object(m.jsxs)(w.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(m.jsx)(je.a,{id:"alert-dialog-title",children:"Delete Meter"}),Object(m.jsx)(p.a,{children:Object(m.jsx)(k.a,{id:"alert-dialog-description",children:"Are you sure you want to delete this Bill?"})}),Object(m.jsxs)(ue.a,{children:[Object(m.jsx)(j.a,{onClick:this.handleClose,color:"primary",children:"Back"}),Object(m.jsx)(j.a,{onClick:this.onSubmit,color:"secondary",autoFocus:!0,children:"Delete"})]})]})]})}}]),a}(s.a.Component),lt=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={open:!1},r.handleClickOpen=r.handleClickOpen.bind(Object(T.a)(r)),r.handleClose=r.handleClose.bind(Object(T.a)(r)),r.onSubmit=r.onSubmit.bind(Object(T.a)(r)),r}return Object(c.a)(a,[{key:"deleteMetersBill",value:function(){var e=this;return console.log("bill -id",this.props.bill_id),new Promise((function(t,a){D.a.delete("/deletesub_bill",{data:{bill_id:e.props.bill_id}}).then((function(e){})),t(),alert("please click show to see updates")}))}},{key:"handleClickOpen",value:function(){this.setState({open:!0})}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"onSubmit",value:function(){this.setState({open:!1}),this.deleteMetersBill()}},{key:"render",value:function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(j.a,{color:"secondary",onClick:this.handleClickOpen,children:"Delete"}),Object(m.jsxs)(w.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(m.jsx)(je.a,{id:"alert-dialog-title",children:"Delete Meter"}),Object(m.jsx)(p.a,{children:Object(m.jsx)(k.a,{id:"alert-dialog-description",children:"Are you sure you want to delete this Bill?"})}),Object(m.jsxs)(ue.a,{children:[Object(m.jsx)(j.a,{onClick:this.handleClose,color:"primary",children:"Back"}),Object(m.jsx)(j.a,{onClick:this.onSubmit,color:"secondary",autoFocus:!0,children:"Delete"})]})]})]})}}]),a}(s.a.Component),dt=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={property_id:r.props.property_id,tenant_list:r.props.tenant_list,from_date:"",to_date:"",submeter_bill_id:"",bill_id:"",submeter_id:"",prior_read:"",current_read:"",amt_due:"",bill_list:[],submeter_bill_list:[],unit_charge:"",meter_id:r.props.meter_id,billing_dates:[],current_resm:[],current_res:[],button_flag:!1,helper_text:""},r.handleFromDateChange=r.handleFromDateChange.bind(Object(T.a)(r)),r.handleToDateChange=r.handleToDateChange.bind(Object(T.a)(r)),r.getMeterBillList=r.getMeterBillList.bind(Object(T.a)(r)),r.getSubmeterBillList=r.getSubmeterBillList.bind(Object(T.a)(r)),r.onSubmit=r.onSubmit.bind(Object(T.a)(r)),r.getBillingDates=r.getBillingDates.bind(Object(T.a)(r)),r.getCurrentBill=r.getCurrentBill.bind(Object(T.a)(r)),r.getCurrentSubBill=r.getCurrentSubBill.bind(Object(T.a)(r)),r.getHelperText=r.getHelperText.bind(Object(T.a)(r)),r.handleClose=r.handleClose.bind(Object(T.a)(r)),r.generateBillingDateTable(),r}return Object(c.a)(a,[{key:"componentDidMount",value:function(){}},{key:"handleFromDateChange",value:function(e){var t=this;this.setState({from_date:e.target.value},(function(){console.log(t.state.from_date)}))}},{key:"handleToDateChange",value:function(e){var t=this;this.setState({to_date:e.target.value},(function(){console.log(t.state.to_date)}))}},{key:"getBillingDates",value:function(){var e=this;return new Promise((function(t,a){D.a.get("/alltime_period/".concat(e.state.property_id)).then((function(a){e.setState({billing_dates:a.data},(function(){console.log("response from database: ",a.data),t()}))}))}))}},{key:"getMeterBillList",value:function(){var e=this;return new Promise((function(t,a){D.a.get("/history_meterbill_list/".concat(e.state.property_id,"/").concat(e.state.from_date,"/").concat(e.state.to_date,"\n            ")).then((function(a){console.log("response from database: ",a.data),e.setState({bill_list:a.data},(function(){console.log("bill list",e.state.bill_list),t()}))}))}))}},{key:"getSubmeterBillList",value:function(){var e=this;return new Promise((function(t,a){D.a.get("/history_submeterbill_list/".concat(e.state.property_id,"/").concat(e.state.from_date,"/").concat(e.state.to_date,"\n            ")).then((function(a){console.log("response from database: ",a.data),e.setState({submeter_bill_list:a.data},(function(){console.log("submeter bill list",e.state.submeter_bill_list),t()}))}))}))}},{key:"onSubmit",value:function(){if(""!=this.state.from_date&&""!=this.state.to_date){this.generateMeterTable(),this.generateSubmeterTable();var e="Viewing bill of "+this.state.from_date+" to "+this.state.to_date;this.setState({button_flag:!0,helper_text:e}),console.log("bill list length:",this.state.bill_list.length),console.log(this.state.from_date,this.state.to_date,this.state.bill_list,this.state.submeter_bill_list)}else alert("please select a time period")}},{key:"getCurrentBill",value:function(e){console.log("test test:",e),this.setState({current_resm:e})}},{key:"getCurrentSubBill",value:function(e){console.log("test test:",e),this.setState({current_res:e})}},{key:"getHelperText",value:function(e){console.log("helper: ",e),this.setState({helper_text:e})}},{key:"handleClose",value:function(){this.setState({button_flag:!1})}},{key:"generateMeterTable",value:function(){var e=this,t=[];this.getMeterBillList().then((function(){var a=e.state.bill_list;if(0!=a.length){console.log(e.state.bill_list);for(var r=0;r<a.length;r++)t.push(Object(m.jsxs)(Y.a,{id:r,children:[Object(m.jsx)(q.a,{children:a[r].bill_id}),Object(m.jsx)(q.a,{children:a[r].meter_id}),Object(m.jsx)(q.a,{children:a[r].from_date.split("T")[0]}),Object(m.jsx)(q.a,{children:a[r].to_date.split("T")[0]}),Object(m.jsx)(q.a,{children:a[r].total_kwh_usage}),Object(m.jsx)(q.a,{children:a[r].total_charge})]},r));e.resm=t,e.setState({current_resm:t}),e.forceUpdate()}else alert("No bills in current time period, please manually input !")}))}},{key:"generateSubmeterTable",value:function(){var e=this,t=[];console.log("where are you",this.state.submeter_bill_list),this.getSubmeterBillList().then((function(){var a=e.state.submeter_bill_list;console.log(e.state.submeter_bill_list);for(var r=0;r<a.length;r++)t.push(Object(m.jsxs)(Y.a,{id:r,children:[Object(m.jsx)(q.a,{children:a[r].submeter_bill_id}),Object(m.jsx)(q.a,{children:a[r].bill_id}),Object(m.jsx)(q.a,{children:a[r].submeter_id}),Object(m.jsx)(q.a,{children:a[r].prior_read}),Object(m.jsx)(q.a,{children:a[r].cur_read}),Object(m.jsx)(q.a,{children:a[r].unit_charge}),Object(m.jsx)(q.a,{children:a[r].amt_due})]},r));e.res=t,e.setState({current_res:t}),e.forceUpdate()}))}},{key:"generateBillingDateTable",value:function(){var e=this,t=[];this.getBillingDates().then((function(){var a=e.state.billing_dates;if(console.log("bill date::",e.state.billing_dates),null!==a[0].from_date){for(var r=0;r<a.length;r++)t.push(Object(m.jsxs)(Y.a,{id:r,children:[Object(m.jsx)(q.a,{children:a[r].from_date.split("T")[0]}),Object(m.jsx)(q.a,{children:a[r].to_date.split("T")[0]}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{children:Object(m.jsx)(ht,{property_id:e.props.property_id,from_date:a[r].from_date.split("T")[0],to_date:a[r].to_date.split("T")[0],methodfromparent:e.getCurrentBill,methodfromparenttwo:e.getCurrentSubBill,methodfromparentthree:e.getHelperText})}),Object(m.jsx)(q.a,{})]},r));e.resb=t,e.forceUpdate()}}))}},{key:"render",value:function(){return Object(m.jsxs)(s.a.Fragment,{children:[Object(m.jsx)(h.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:"Billing History"}),Object(m.jsxs)(Ce.a,{style:{maxHeight:600},children:[Object(m.jsxs)("form",{noValidate:!0,children:[Object(m.jsx)(S.a,{id:"from_date",label:"From",type:"date",defaultValue:this.state.from_date,InputLabelProps:{shrink:!0},onChange:this.handleFromDateChange}),Object(m.jsx)(S.a,{id:"to_date",label:"To",type:"date",defaultValue:this.state.to_date,InputLabelProps:{shrink:!0},onChange:this.handleToDateChange})]}),Object(m.jsx)(k.a,{}),Object(m.jsx)(j.a,{onClick:this.onSubmit,color:"primary",children:"Show"}),Object(m.jsx)(et.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.button_flag,autoHideDuration:6e3,onClose:this.handleClose,message:this.state.helper_text}),Object(m.jsxs)(H.a,{stickyHeader:!0,children:[Object(m.jsx)(V.a,{children:Object(m.jsxs)(Y.a,{children:[Object(m.jsx)(q.a,{children:"Billing Start Date"}),Object(m.jsx)(q.a,{children:"Billing End Date"}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{}),Object(m.jsx)(q.a,{})]})}),Object(m.jsx)(z.a,{children:this.resb})]})]}),Object(m.jsx)(b.a,{}),Object(m.jsx)(b.a,{}),Object(m.jsx)(b.a,{}),Object(m.jsx)(b.a,{}),Object(m.jsx)(b.a,{}),Object(m.jsx)(b.a,{}),Object(m.jsx)(b.a,{}),Object(m.jsx)(b.a,{}),Object(m.jsx)(Ce.a,{style:{maxHeight:400},component:u.a,children:Object(m.jsxs)(H.a,{stickyHeader:!0,children:[Object(m.jsx)(V.a,{children:Object(m.jsxs)(Y.a,{children:[Object(m.jsx)(q.a,{children:"Meter Bill ID"}),Object(m.jsx)(q.a,{children:"Meter"}),Object(m.jsx)(q.a,{children:"Billing Start Date"}),Object(m.jsx)(q.a,{children:"Billing End Date"}),Object(m.jsx)(q.a,{children:"Total KWH Usage"}),Object(m.jsx)(q.a,{children:"Total Charge"}),Object(m.jsx)(q.a,{})]})}),Object(m.jsx)(z.a,{children:this.state.current_resm})]})}),Object(m.jsx)(b.a,{}),Object(m.jsx)(b.a,{}),Object(m.jsx)(b.a,{}),Object(m.jsx)(b.a,{}),Object(m.jsx)(b.a,{}),Object(m.jsx)(b.a,{}),Object(m.jsx)(b.a,{}),Object(m.jsx)(b.a,{}),Object(m.jsx)(Ce.a,{style:{maxHeight:400},component:u.a,children:Object(m.jsxs)(H.a,{stickyHeader:!0,children:[Object(m.jsx)(V.a,{children:Object(m.jsxs)(Y.a,{children:[Object(m.jsx)(q.a,{children:"Submeter Bill ID"}),Object(m.jsx)(q.a,{children:"Associate with Bill ID:"}),Object(m.jsx)(q.a,{children:"Submeter"}),Object(m.jsx)(q.a,{children:"Prior Read"}),Object(m.jsx)(q.a,{children:"Current Read"}),Object(m.jsx)(q.a,{children:"Unit Charge"}),Object(m.jsx)(q.a,{children:"Amount Due"}),Object(m.jsx)(q.a,{})]})}),Object(m.jsx)(z.a,{children:this.state.current_res})]})})]})}}]),a}(s.a.Component),ht=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={property_id:r.props.property_id,from_date:r.props.from_date,to_date:r.props.to_date,current_resm:[],current_res:[],bill_list:[],submeter_bill_list:[],button_flag:!1,helper_text:""},r.onSubmit=r.onSubmit.bind(Object(T.a)(r)),r.getMeterBillList=r.getMeterBillList.bind(Object(T.a)(r)),r.getSubmeterBillList=r.getSubmeterBillList.bind(Object(T.a)(r)),r.handleClose=r.handleClose.bind(Object(T.a)(r)),r}return Object(c.a)(a,[{key:"getMeterBillList",value:function(){var e=this;return new Promise((function(t,a){D.a.get("/history_meterbill_list/".concat(e.state.property_id,"/").concat(e.state.from_date,"/").concat(e.state.to_date,"\n            ")).then((function(a){e.setState({bill_list:a.data},(function(){t()}))}))}))}},{key:"getSubmeterBillList",value:function(){var e=this;return new Promise((function(t,a){D.a.get("/history_submeterbill_list/".concat(e.state.property_id,"/").concat(e.state.from_date,"/").concat(e.state.to_date,"\n            ")).then((function(a){e.setState({submeter_bill_list:a.data},(function(){t()}))}))}))}},{key:"generateMeterTable",value:function(){var e=this,t=[];this.getMeterBillList().then((function(){var a=e.state.bill_list;if(0!=a.length){for(var r=0;r<a.length;r++)t.push(Object(m.jsxs)(Y.a,{id:r,children:[Object(m.jsx)(q.a,{children:a[r].bill_id}),Object(m.jsx)(q.a,{children:a[r].meter_id}),Object(m.jsx)(q.a,{children:a[r].from_date.split("T")[0]}),Object(m.jsx)(q.a,{children:a[r].to_date.split("T")[0]}),Object(m.jsx)(q.a,{children:a[r].total_kwh_usage}),Object(m.jsx)(q.a,{children:a[r].total_charge}),Object(m.jsx)(q.a,{children:Object(m.jsx)(ct,{bill_id:a[r].bill_id,generateTableData:e.onSubmit})})]},r));e.resm=t,e.setState({current_resm:t},(function(){e.props.methodfromparent(t)})),console.log("tryone"+e.state.current_resm)}else alert("No bills in current time period, please manually input !")}))}},{key:"generateSubmeterTable",value:function(){var e=this,t=[];this.getSubmeterBillList().then((function(){for(var a=e.state.submeter_bill_list,r=0;r<a.length;r++)t.push(Object(m.jsxs)(Y.a,{id:r,children:[Object(m.jsx)(q.a,{children:a[r].submeter_bill_id}),Object(m.jsx)(q.a,{children:a[r].bill_id}),Object(m.jsx)(q.a,{children:a[r].submeter_id}),Object(m.jsx)(q.a,{children:a[r].prior_read}),Object(m.jsx)(q.a,{children:a[r].cur_read}),Object(m.jsx)(q.a,{children:a[r].unit_charge}),Object(m.jsx)(q.a,{children:a[r].amt_due}),Object(m.jsx)(q.a,{children:Object(m.jsx)(lt,{bill_id:a[r].submeter_bill_id,generateTableData:e.onSubmit})})]},r));e.res=t,e.setState({current_res:t},(function(){e.props.methodfromparenttwo(t)})),e.forceUpdate()}))}},{key:"onSubmit",value:function(){var e=this;console.log(this.state.property_id,this.state.from_date,this.state.to_date),this.generateMeterTable(),this.generateSubmeterTable();var t="Viewing bill of "+this.state.from_date+" to "+this.state.to_date;this.setState({button_flag:!0,helper_text:t},(function(){e.props.methodfromparentthree(t)})),this.forceUpdate()}},{key:"handleClose",value:function(){this.setState({button_flag:!1})}},{key:"render",value:function(){return Object(m.jsxs)(s.a.Fragment,{children:[Object(m.jsx)(j.a,{color:"primary",onClick:this.onSubmit,children:"Show"}),Object(m.jsx)(et.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.button_flag,autoHideDuration:6e3,onClose:this.handleClose,message:this.state.helper_text})]})}}]),a}(s.a.Component),bt=dt,ut=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={display:r.props.display,property_id:r.props.property_id,tenant_list:r.props.tenant_list},r}return Object(c.a)(a,[{key:"render",value:function(){var e=Object(re.a)((function(e){return{container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));return Object(m.jsx)("div",{className:"leftOffset",children:Object(m.jsx)(s.a.Fragment,{children:Object(m.jsx)(st.a,{maxWidth:"lg",className:e.container,children:Object(m.jsxs)(B.a,{container:!0,spacing:3,children:[Object(m.jsx)(B.a,{item:!0,xs:12,md:12,lg:12,children:Object(m.jsx)(u.a,{children:Object(m.jsx)(bt,{className:"display_item",property_id:this.state.property_id,tenant_list:this.state.tenant_list,info:this})})}),Object(m.jsx)(B.a,{item:!0,xs:12,md:12,lg:12,children:Object(m.jsx)(u.a,{children:Object(m.jsx)(it,{className:"display_item",property_id:this.state.property_id,info:this})})}),Object(m.jsx)(B.a,{item:!0,xs:12,md:12,lg:12,children:Object(m.jsx)(u.a,{children:Object(m.jsx)(ot,{className:"display_item",property_id:this.state.property_id,info:this})})})]})})})})}}]),a}(s.a.Component),jt=a(242),pt=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).changeUsername=function(e){r.setState({username:e.target.value})},r.changeCompanyName=function(e){r.setState({"custom:company_name":e.target.value})},r.changeStreetName=function(e){r.setState({"custom:street_name":e.target.value})},r.changeSuiteNumber=function(e){r.setState({"custom:suite_number":e.target.value})},r.changeCity=function(e){r.setState({"custom:city":e.target.value})},r.changeState=function(e){r.setState({"custom:state":e.target.value})},r.changeZipcode=function(e){r.setState({"custom:zipcode":e.target.value})},r.handleClose=function(){r.setState({open:!1})},r.dialog_text=function(){return r.state.success?"Your change was successful.":"Your change was unsuccessful."},r.dialog_title=function(){return r.state.success?"Update Succeeded":"Update Failed"},r.state={open:!1,success:!0,username:sessionStorage.getItem("username"),"custom:company_name":sessionStorage.getItem("custom:company_name"),"custom:street_name":sessionStorage.getItem("custom:street_name"),"custom:suite_number":sessionStorage.getItem("custom:suite_number"),"custom:city":sessionStorage.getItem("custom:city"),"custom:state":sessionStorage.getItem("custom:state"),"custom:zipcode":sessionStorage.getItem("custom:zipcode")},r}return Object(c.a)(a,[{key:"edit_attributes",value:function(e){var t=this,a={AccessToken:JSON.parse(sessionStorage.getItem("accessToken")).jwtToken,UserAttributes:[{Name:"username"==e?"email":e,Value:this.state[e]}]};new jt.CognitoIdentityServiceProvider({region:C}).updateUserAttributes(a,(function(a,r){a?(console.log(a),t.setState({success:!1,open:!0})):(sessionStorage.setItem(e,t.state[e]),t.setState({success:!0,open:!0}))}))}},{key:"render",value:function(){var e=this;return Object(m.jsxs)("div",{children:[Object(m.jsx)(H.a,{children:Object(m.jsxs)(z.a,{children:[Object(m.jsxs)(Y.a,{children:[Object(m.jsx)(q.a,{children:"email"}),Object(m.jsx)(q.a,{children:Object(m.jsx)(S.a,{type:"text",value:this.state.username,onChange:this.changeUsername,fullWidth:!0})}),Object(m.jsx)(q.a,{children:Object(m.jsx)(j.a,{onClick:function(){return e.edit_attributes("username")},children:"Change"})})]}),Object(m.jsxs)(Y.a,{children:[Object(m.jsx)(q.a,{children:"Company Name"}),Object(m.jsx)(q.a,{children:Object(m.jsx)(S.a,{type:"text",value:this.state["custom:company_name"],onChange:this.changeCompanyName,fullWidth:!0})}),Object(m.jsx)(q.a,{children:Object(m.jsx)(j.a,{onClick:function(){return e.edit_attributes("custom:company_name")},children:"Change"})})]}),Object(m.jsxs)(Y.a,{children:[Object(m.jsx)(q.a,{children:"Street Address"}),Object(m.jsx)(q.a,{children:Object(m.jsx)(S.a,{type:"text",value:this.state["custom:street_name"],onChange:this.changeStreetName,fullWidth:!0})}),Object(m.jsx)(q.a,{children:Object(m.jsx)(j.a,{onClick:function(){return e.edit_attributes("custom:street_name")},children:"Change"})})]}),Object(m.jsxs)(Y.a,{children:[Object(m.jsx)(q.a,{children:"Suite"}),Object(m.jsx)(q.a,{children:Object(m.jsx)(S.a,{type:"text",value:this.state["custom:suite_number"],onChange:this.changeSuiteNumber,fullWidth:!0})}),Object(m.jsx)(q.a,{children:Object(m.jsx)(j.a,{onClick:function(){return e.edit_attributes("custom:suite_number")},children:"Change"})})]}),Object(m.jsxs)(Y.a,{children:[Object(m.jsx)(q.a,{children:"City"}),Object(m.jsx)(q.a,{children:Object(m.jsx)(S.a,{type:"text",value:this.state["custom:city"],onChange:this.changeCity,fullWidth:!0})}),Object(m.jsx)(q.a,{children:Object(m.jsx)(j.a,{onClick:function(){return e.edit_attributes("custom:city")},children:"Change"})})]}),Object(m.jsxs)(Y.a,{children:[Object(m.jsx)(q.a,{children:"State"}),Object(m.jsx)(q.a,{children:Object(m.jsx)(S.a,{type:"text",value:this.state["custom:state"],onChange:this.changeState,fullWidth:!0})}),Object(m.jsx)(q.a,{children:Object(m.jsx)(j.a,{onClick:function(){return e.edit_attributes("custom:state")},children:"Change"})})]}),Object(m.jsxs)(Y.a,{children:[Object(m.jsx)(q.a,{children:"zipcode"}),Object(m.jsx)(q.a,{children:Object(m.jsx)(S.a,{type:"text",value:this.state["custom:zipcode"],onChange:this.changeZipcode,fullWidth:!0})}),Object(m.jsx)(q.a,{children:Object(m.jsx)(j.a,{onClick:function(){return e.edit_attributes("custom:zipcode")},children:"Change"})})]})]})}),Object(m.jsxs)(w.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(m.jsx)(je.a,{id:"alert-dialog-title",children:this.dialog_title()}),Object(m.jsx)(p.a,{children:Object(m.jsx)(k.a,{id:"alert-dialog-description",children:this.dialog_text()})}),Object(m.jsx)(ue.a,{children:Object(m.jsx)(j.a,{onClick:this.handleClose,color:"primary",children:"Ok"})})]})]})}}]),a}(r.Component);function mt(e,t,a){for(var r=[e],s=0;s<t.length;s++)Number(e)==Number(t[s].tenant_id)&&r.push(_t(t[s].meter_id,a));return r}function _t(e,t){for(var a=0;a<t.length;a++)if(Number(t[a].meter_id)==Number(e))return t[a];return null}function Ot(e,t,a){var r=[e];console.log("find tenant",e,t);for(var s=0;s<t.length;s++)Number(e)==Number(t[s].tenant_id)&&r.push(gt(t[s].submeter_id,a));return r}function gt(e,t){for(var a=0;a<t.length;a++)if(e==t[a].submeter_id)return console.log("submeter_bill_list:",t[a]),t[a];return null}function xt(e,t){for(var a=0;a<t.length;a++)if(e==t[a].submeter_id)return t[a].multiplier;return 0}function ft(e,t){for(var a=0;a<t.length;a++)if(Number(e)==Number(t[a].tenant_id))return t[a].email;return null}var vt=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={property_id:r.props.property_id,begin:"",end:"",open:!1,from_date:"",to_date:"",meter_bill_list:[],submeter_bill_list:[],final_invoice_list:[],tenant_list:[],property_info:"",invoice_list:[]},r.handleClickOpen=r.handleClickOpen.bind(Object(T.a)(r)),r.handleClose=r.handleClose.bind(Object(T.a)(r)),r.onSubmit=r.onSubmit.bind(Object(T.a)(r)),r.changeFromDate=r.changeFromDate.bind(Object(T.a)(r)),r.changeTodate=r.changeTodate.bind(Object(T.a)(r)),r}return Object(c.a)(a,[{key:"handleClickOpen",value:function(){this.setState({open:!0})}},{key:"changeFromDate",value:function(e){this.setState({from_date:e})}},{key:"changeTodate",value:function(e){this.setState({to_date:e})}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"uploadInvoiceToDataBase",value:function(e){return new Promise((function(t,a){D.a.post("/upload_invoice",{final_invoice_list:e}).then((function(e){console.log("response",e.data),0==e.data.length?(console.log("nnnnnno"),alert("Done ! ! !  now you can check invoice in {Manage Invoice History}")):alert("This month's invoices were generated previously, please checkout invoice history")}))}))}},{key:"invoice_generator",value:function(){var e=this;return new Promise((function(t,a){D.a.post("/meterbill_list",{property_id:e.state.property_id,from_date:e.state.from_date,to_date:e.state.to_date}).then((function(a){console.log("response body:",a.data),console.log("rr:",a.data.meter_bill_list),t(),e.setState({meter_bill_list:a.data.meter_bill_list,submeter_bill_list:a.data.submeter_bill_list});var r=a.data.meter_bill_list,s=a.data.submeter_bill_list,n=a.data.meter_tenant_list,i=a.data.all_tenant_list,o=a.data.meter_submeter_list,c=r;if(n.length==r.length)if(s.length==o.length){for(var l=0;l<c.length;l++)for(var d=c[l].bill_id,h=0;h<s.length;h++){var b=s[h].bill_id;Number(d)==Number(b)&&(c[l].total_charge=Number(c[l].total_charge)-Number(s[h].amt_due))}var u=[];for(l=0;l<i.length;l++){console.log("loop all tenants:",i[l]);var j=i[l];if(Number(j.rubs)>0){console.log(j.tenant_id,"is rubs");var p=mt(j.tenant_id,n,r),m=0,_=[];for(h=1;h<p.length;h++)m+=Number(j.rubs)*p[h].total_charge,_.push({meter_id:p[h].meter_id,meter_amt_due:p[h].total_charge*j.rubs});console.log("the rubs tenant bill list is here: ",p);ft(j.tenant_id,i);var O={charge_list:_,rubs:j.rubs,tenant_id:j.tenant_id,from_date:r[0].from_date,to_date:r[0].to_date,has_submeter:0,total_charge:m};u.push(O)}else if(0==Number(j.rubs)){console.log("starting handle submeter tenant:");p=Ot(j.tenant_id,o,s);console.log("submeter tenant:",p);for(m=0,_=[],h=1;h<p.length;h++){console.log("ttttttt:",p[h].amt_due),m+=Number(p[h].amt_due);var g=xt(p[h].submeter_id,o);_.push({submeter_id:p[h].submeter_id,unit_charge:p[h].unit_charge,prior_read:p[h].prior_read,cur_read:p[h].cur_read,multiplier:g,amt_due:p[h].amt_due})}console.log("sum: ",m);ft(j.tenant_id,i);var x={charge_list:_,tenant_id:j.tenant_id,from_date:r[0].from_date,to_date:r[0].to_date,has_submeter:1,total_charge:m,rubs:j.rubs};u.push(x)}}console.log("final invoice list:",u),e.uploadInvoiceToDataBase(u)}else alert("please input all submeter bills for this time period, you can check from {Manage Utility Bill}");else alert("please input all meter bills for this time period, you can check from {Manage Utility Bill}")}))}))}},{key:"onSubmit",value:function(e){e.preventDefault(),this.setState({open:!1}),""!=this.state.from_date&&""!=this.state.to_date?this.invoice_generator():alert("please select a time period")}},{key:"render",value:function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)("a",{href:"#",onClick:this.handleClickOpen,children:"Generate Invoice"}),Object(m.jsxs)("div",{className:"main",children:[Object(m.jsxs)(w.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",children:[Object(m.jsx)(je.a,{id:"form-dialog-title",children:"(please generate invoice after inputting all bills and submeter bills, please only generate invoice once per month, current function only support 1 month invoice generate)"}),Object(m.jsxs)(H.a,{children:[Object(m.jsx)(V.a,{children:Object(m.jsxs)(Y.a,{children:[Object(m.jsxs)(q.a,{children:["Property ID: ",this.state.property_id]}),Object(m.jsx)(q.a,{children:Object(m.jsx)(we,{from_date:this.changeFromDate.bind(this),to_date:this.changeTodate.bind(this)})}),Object(m.jsxs)(q.a,{children:[Object(m.jsx)(j.a,{onClick:this.onSubmit,color:"primary",children:"Generate"}),Object(m.jsx)(j.a,{onClick:this.handleClose,color:"primary",children:"Cancel"})]})]})}),Object(m.jsx)(z.a,{children:this.res})]})]})," "]})]})}}]),a}(r.Component),yt=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).manage_property=function(){!0===e.props.is_admin?window.location="/Admin/PropMana/".concat(e.props.sub,"/property"):window.location="/PropMana/".concat(e.props.sub,"/property")},e.edit_profile=function(){!0===e.props.is_admin?window.location="/Admin/PropMana/".concat(e.props.sub,"/user_info"):window.location="/PropMana/".concat(e.props.sub,"/user_info")},e.manage_utility=function(){!0===e.props.is_admin?window.location="/Admin/PropMana/".concat(e.props.sub,"/property/").concat(e.props.property_id,"/utility_bill"):window.location="/PropMana/".concat(e.props.sub,"/property/").concat(e.props.property_id,"/utility_bill")},e.manage_invoice=function(){!0===e.props.is_admin?window.location="/Admin/PropMana/".concat(e.props.sub,"/property/").concat(e.props.property_id,"/invoice_history"):window.location="/PropMana/".concat(e.props.sub,"/property/").concat(e.props.property_id,"/invoice_history")},e.view_detail=function(){!0===e.props.is_admin?window.location="/Admin/PropMana/".concat(e.props.sub,"/property/").concat(e.props.property_id):window.location="/PropMana/".concat(e.props.sub,"/property/").concat(e.props.property_id)},e.manage_users=function(){sessionStorage.removeItem("sub"),sessionStorage.removeItem("username"),sessionStorage.removeItem("property_id"),sessionStorage.removeItem("property_name"),sessionStorage.removeItem("total_footage"),sessionStorage.removeItem("custom:company_name"),window.location="/Admin/propertyManagers"},e.log_out=function(){sessionStorage.removeItem("sub"),sessionStorage.removeItem("username"),sessionStorage.removeItem("property_id"),sessionStorage.removeItem("property_name"),sessionStorage.removeItem("total_footage"),sessionStorage.removeItem("custom:state"),sessionStorage.removeItem("custom:company_name"),sessionStorage.removeItem("custom:city"),sessionStorage.removeItem("custom:zipcode"),sessionStorage.removeItem("custom:street_name"),sessionStorage.removeItem("custom:suite_number"),sessionStorage.removeItem("accessToken"),D.a.post("/logout").then((function(e){window.location="/"}))},e}return Object(c.a)(a,[{key:"render",value:function(){return Object(m.jsx)("div",{className:"sidenav",children:Object(m.jsx)("header",{children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("a",{href:"#",onClick:this.manage_property,children:"Manage Property Info"}),this.props.is_admin?null:Object(m.jsx)("a",{href:"#",onClick:this.edit_profile,children:"Edit Profile Info"}),this.props.display_more_options?Object(m.jsxs)("div",{children:[Object(m.jsx)("a",{href:"#",onClick:this.manage_utility,children:"Manage Utility Bill"}),Object(m.jsx)("a",{href:"#",onClick:this.manage_invoice,children:"Manage Invoice History"}),Object(m.jsx)(vt,{property_id:this.props.property_id}),Object(m.jsx)("a",{href:"#",onClick:this.view_detail,children:"Back to Property Details"})]}):null,this.props.is_admin?Object(m.jsx)("a",{href:"#",onClick:this.manage_users,children:"Back to Admin Panel"}):Object(m.jsx)("a",{href:"#",onClick:this.log_out,children:"Log Out"})]})})})}}]),a}(r.Component),Ct=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r,s;Object(o.a)(this,a);var n,i,c,l=(r=t.call(this,e)).props.match.params.sub;return Object(X.e)(r.props.location.pathname,{path:"/PropMana/:sub/user_info",exact:!0,strict:!1})||Object(X.e)(r.props.location.pathname,{path:"/Admin/PropMana/:sub/user_info",exact:!0,strict:!1})?s="user_info":Object(X.e)(r.props.location.pathname,{path:"/PropMana/:sub/property",exact:!0,strict:!1})||Object(X.e)(r.props.location.pathname,{path:"/Admin/PropMana/:sub/property",exact:!0,strict:!1})?s="property":Object(X.e)(r.props.location.pathname,{path:"/PropMana/:sub/property/:property_id",exact:!0,strict:!1})||Object(X.e)(r.props.location.pathname,{path:"/Admin/PropMana/:sub/property/:property_id",exact:!0,strict:!1})?(n=r.props.match.params.property_id,s="tenant"):Object(X.e)(r.props.location.pathname,{path:"/PropMana/:sub/property/:property_id/invoice_history",exact:!0,strict:!1})||Object(X.e)(r.props.location.pathname,{path:"/Admin/PropMana/:sub/property/:property_id/invoice_history",exact:!0,strict:!1})?(n=r.props.match.params.property_id,s="invoice_history"):(Object(X.e)(r.props.location.pathname,{path:"/PropMana/:sub/property/:property_id/utility_bill",exact:!0,strict:!1})||Object(X.e)(r.props.location.pathname,{path:"/Admin/PropMana/:sub/property/:property_id/utility_bill",exact:!0,strict:!1}))&&(n=r.props.match.params.property_id,s="utility_bill"),Object(X.e)(r.props.location.pathname,{path:"/Admin",exact:!1})?(i="Admin",c="Welcome, Admin "+sessionStorage.getItem("admin_username")):(i="PropMana",c="Welcome, Property Manager "+sessionStorage.getItem("username")),r.state={sub:l,property_id:n,page:function(){switch(s){case"user_info":return Object(m.jsx)(pt,{});case"property":return Object(m.jsx)(Ge,{sub:l,is_admin:"Admin"==i});case"tenant":return Object(m.jsx)(qe,{sub:l,property_id:n});case"invoice_history":return Object(m.jsx)(nt,{display:Object(T.a)(r),property_id:n,tenant_list:r.tenant_list});case"utility_bill":return Object(m.jsx)(ut,{display:Object(T.a)(r),property_id:n,tenant_list:r.tenant_list})}}(),page_name:function(){switch(s){case"property":switch(i){case"Admin":return sessionStorage.getItem("username")+": "+sessionStorage.getItem("custom:company_name")+"'s Properties";case"PropMana":return sessionStorage.getItem("custom:company_name")+"'s Properties"}case"tenant":case"invoice_history":case"utility_bill":return sessionStorage.getItem("property_name")+" Information"}}(),menu_display_more_options:function(){switch(s){case"property":return!1;case"tenant":case"invoice_history":case"utility_bill":return!0}}(),is_admin:function(){switch(i){case"Admin":return!0;case"PropMana":return!1}}(),role_message:function(){switch(i){case"Admin":case"PropMana":return c}}()},sessionStorage.setItem("sub",l),r}return Object(c.a)(a,[{key:"render",value:function(){return Object(m.jsxs)("div",{className:"topOffset leftOffset",children:[Object(m.jsxs)(h.a,{component:"h1",variant:"h5",color:"primary",children:[this.state.role_message,Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),this.state.page_name,Object(m.jsx)("br",{}),Object(m.jsx)("br",{})]}),Object(m.jsx)(p.a,{}),Object(m.jsxs)("div",{className:"Info_Page_Split",children:[Object(m.jsx)(yt,{sub:this.state.sub,display_more_options:this.state.menu_display_more_options,is_admin:this.state.is_admin,property_id:this.state.property_id}),Object(m.jsx)("div",{className:"display",children:this.state.page})]})]})}}]),a}(r.Component),kt=a(85),St=a(124);D.a.defaults.baseURL="http://".concat(St.server_ip,":3000/"),D.a.defaults.withCredentials=!0;var wt=function(){return Object(m.jsx)(kt.a,{children:Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(U,{}),Object(m.jsxs)(X.c,{children:[Object(m.jsx)(X.a,{exact:!0,path:"/",component:_}),Object(m.jsx)(X.a,{exact:!0,path:"/LoginPage",component:E}),Object(m.jsx)(X.a,{exact:!0,path:"/SignUpPage",component:F}),Object(m.jsx)(X.a,{exact:!0,path:"/About",component:W}),Object(m.jsx)(X.a,{exact:!0,path:"/Admin",component:ee}),Object(m.jsx)(X.a,{exact:!0,path:"/Admin/propertyManagers",component:ee}),Object(m.jsx)(X.a,{exact:!0,path:"/PropMana",component:Ct}),Object(m.jsx)(X.a,{exact:!0,path:"/PropMana/:sub",component:Ct}),Object(m.jsx)(X.a,{exact:!0,path:"/PropMana/:sub/property",component:Ct}),Object(m.jsx)(X.a,{exact:!0,path:"/PropMana/:sub/property/:property_id",component:Ct}),Object(m.jsx)(X.a,{exact:!0,path:"/PropMana/:sub/property/:property_id/invoice_history",component:Ct}),Object(m.jsx)(X.a,{exact:!0,path:"/PropMana/:sub/property/:property_id/utility_bill",component:Ct}),Object(m.jsx)(X.a,{exact:!0,path:"/PropMana/:sub/user_info",component:Ct}),Object(m.jsx)(X.a,{exact:!0,path:"/PropMana/:sub/property/:propertyId/individual_tenant_invoice",component:Xe}),Object(m.jsx)(X.a,{exact:!0,path:"/Admin/PropMana/:sub",component:Ct}),Object(m.jsx)(X.a,{exact:!0,path:"/Admin/PropMana/:sub/property",component:Ct}),Object(m.jsx)(X.a,{exact:!0,path:"/Admin/PropMana/:sub/property/:property_id",component:Ct}),Object(m.jsx)(X.a,{exact:!0,path:"/Admin/PropMana/:sub/invoiceHistory",component:Ct}),Object(m.jsx)(X.a,{exact:!0,path:"/Admin/PropMana/:sub/property/:property_id/invoice_history",component:Ct}),Object(m.jsx)(X.a,{exact:!0,path:"/Admin/PropMana/:sub/property/:property_id/utility_bill",component:Ct}),Object(m.jsx)(X.a,{exact:!0,path:"/Admin/PropMana/:sub/user_info",component:Ct})," ",Object(m.jsx)(X.a,{exact:!0,path:"/Admin/PropMana/:sub/property/:propertyId/individual_tenant_invoice",component:Xe}),Object(m.jsx)(X.a,{exact:!0,path:"/RegProcess",component:g}),Object(m.jsx)(X.a,{exact:!0,path:"/ResetPassword",component:N}),Object(m.jsx)(X.a,{exact:!0,path:"/ResetProcess",component:P})]})]})})},Pt=a(180),Tt=a(90),Mt=Object(Tt.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type,e}}),Dt=a(179),Et=function(e){e&&e instanceof Function&&a.e(5).then(a.bind(null,1081)).then((function(t){var a=t.getCLS,r=t.getFID,s=t.getFCP,n=t.getLCP,i=t.getTTFB;a(e),r(e),s(e),n(e),i(e)}))},It=Object(Tt.c)(Mt,{},Object(Tt.a)(Dt.a));i.a.render(Object(m.jsx)(Pt.a,{store:It,children:Object(m.jsx)(wt,{})}),document.getElementById("root")),Et()}},[[644,1,2]]]);
//# sourceMappingURL=main.3a8c912d.chunk.js.map